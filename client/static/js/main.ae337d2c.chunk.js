(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{14:function(e,t,n){"use strict";function r(e){return{type:"CURRENT_RETRO_UPDATED",payload:e}}function a(e){return{type:"CURRENT_RETRO_ITEM_UPDATED",payload:e}}function o(e){return{type:"CURRENT_RETRO_ACTION_ITEM_UPDATED",payload:e}}function i(e){return{type:"CURRENT_RETRO_ACTION_ITEM_DELETED",payload:e}}function c(e){return{type:"CURRENT_RETRO_ITEM_DELETED",payload:e}}function s(e,t){return{type:"CURRENT_RETRO_ITEM_DONE_UPDATED",payload:{itemId:e,done:t}}}function l(e){return{type:"CURRENT_RETRO_SEND_ARCHIVE_EMAIL_UPDATED",payload:e}}function u(){return{type:"CURRENT_RETRO_HIGHLIGHT_CLEARED"}}function d(e){return{type:"RETROS_UPDATED",payload:e}}function m(){return{type:"GET_RETROS"}}function h(e){return{type:"ERRORS_UPDATED",payload:e}}function f(){return{type:"CLEAR_ERRORS"}}function p(e){return{type:"SHOW_DIALOG",payload:e}}function v(){return{type:"CLEAR_DIALOG"}}function g(e){return{type:"SHOW_ALERT",payload:e}}function y(){return{type:"CLEAR_ALERT"}}function b(e){return{type:"SET_NOT_FOUND",payload:e}}function E(e){return{type:"WEBSOCKET_SESSION_UPDATED",payload:e}}function R(e){return{type:"CURRENT_ARCHIVED_RETRO_UPDATED",payload:e}}function O(e){return{type:"RETRO_ARCHIVES_UPDATED",payload:e}}function k(e){return{type:"FEATURE_FLAGS_UPDATED",payload:e}}function I(){return{type:"SIGN_OUT"}}function w(e,t){return{type:"FORCE_RELOGIN",payload:{originatorId:e,retroId:t}}}n.d(t,"k",(function(){return r})),n.d(t,"i",(function(){return a})),n.d(t,"e",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"g",(function(){return c})),n.d(t,"h",(function(){return s})),n.d(t,"j",(function(){return l})),n.d(t,"f",(function(){return u})),n.d(t,"o",(function(){return d})),n.d(t,"n",(function(){return m})),n.d(t,"l",(function(){return h})),n.d(t,"c",(function(){return f})),n.d(t,"r",(function(){return p})),n.d(t,"b",(function(){return v})),n.d(t,"q",(function(){return g})),n.d(t,"a",(function(){return y})),n.d(t,"p",(function(){return b})),n.d(t,"w",(function(){return E})),n.d(t,"t",(function(){return R})),n.d(t,"v",(function(){return O})),n.d(t,"u",(function(){return k})),n.d(t,"s",(function(){return I})),n.d(t,"m",(function(){return w}))},17:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"j",(function(){return i})),n.d(t,"f",(function(){return s})),n.d(t,"h",(function(){return l})),n.d(t,"k",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"i",(function(){return m})),n.d(t,"g",(function(){return h})),n.d(t,"c",(function(){return f}));var r=function(e){return{type:"SET_ROUTE",payload:e}},a=function(){return r("/")},o=function(){return r("/retros/new")},i=function(e){return r("/retros/".concat(e.slug))},c=function(e){return r("/retros/".concat(e))},s=function(e){return r("/retros/".concat(e,"/login"))},l=function(e){return r("/retros/".concat(e,"/relogin"))},u=function(e){return r("/retros/".concat(e,"/archives"))},d=function(e,t){return r("/retros/".concat(e,"/archives/").concat(t))},m=function(e){return r("/retros/".concat(e,"/settings"))},h=function(e){return r("/retros/".concat(e,"/settings/password"))},f=function(e,t,n){return r("/registration/".concat(e,"/").concat(t,"/").concat(n))}},19:function(e,t,n){"use strict";n.d(t,"v",(function(){return r})),n.d(t,"l",(function(){return a})),n.d(t,"r",(function(){return o})),n.d(t,"p",(function(){return i})),n.d(t,"o",(function(){return c})),n.d(t,"s",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"y",(function(){return u})),n.d(t,"g",(function(){return d})),n.d(t,"B",(function(){return m})),n.d(t,"t",(function(){return h})),n.d(t,"q",(function(){return f})),n.d(t,"x",(function(){return p})),n.d(t,"i",(function(){return v})),n.d(t,"w",(function(){return g})),n.d(t,"k",(function(){return y})),n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return E})),n.d(t,"h",(function(){return R})),n.d(t,"f",(function(){return O})),n.d(t,"j",(function(){return k})),n.d(t,"m",(function(){return I})),n.d(t,"n",(function(){return w})),n.d(t,"e",(function(){return j})),n.d(t,"d",(function(){return _})),n.d(t,"A",(function(){return S})),n.d(t,"z",(function(){return T})),n.d(t,"u",(function(){return C}));var r=function(e){return{type:"RETRO_CREATE",payload:e}},a=function(e){return{type:"GET_RETRO",payload:e}},o=function(e,t){return{type:"JOIN_RETRO",payload:{retroId:e,joinToken:t}}},i=function(e){return{type:"GET_RETRO_SETTINGS",payload:e}},c=function(e){return{type:"GET_RETRO_LOGIN",payload:e}},s=function(e,t){return{type:"LOGIN_TO_RETRO",payload:{retroId:e,password:t}}},l=function(e,t,n){return{type:"CREATE_RETRO_ITEM",payload:{retroId:e,category:t,description:n}}},u=function(e,t,n){return{type:"UPDATE_RETRO_ITEM",payload:{retroId:e,item:t,description:n}}},d=function(e,t){return{type:"DELETE_RETRO_ITEM",payload:{retroId:e,item:t}}},m=function(e,t){return{type:"VOTE_RETRO_ITEM",payload:{retroId:e,item:t}}},h=function(e){return{type:"NEXT_RETRO_ITEM",payload:e}},f=function(e,t){return{type:"HIGHLIGHT_RETRO_ITEM",payload:{retroId:e,item:t}}},p=function(e){return{type:"UNHIGHLIGHT_RETRO_ITEM",payload:e}},v=function(e,t){return{type:"DONE_RETRO_ITEM",payload:{retroId:e,item:t}}},g=function(e,t){return{type:"UNDONE_RETRO_ITEM",payload:{retroId:e,item:t}}},y=function(e){return{type:"EXTEND_TIMER",payload:e}},b=function(e){return{type:"ARCHIVE_RETRO",payload:e}},E=function(e,t){return{type:"CREATE_RETRO_ACTION_ITEM",payload:{retroId:e,description:t}}},R=function(e,t,n){return{type:"DONE_RETRO_ACTION_ITEM",payload:{retroId:e,actionItemId:t,done:n}}},O=function(e,t){return{type:"DELETE_RETRO_ACTION_ITEM",payload:{retroId:e,actionItem:t}}},k=function(e,t,n){return{type:"EDIT_RETRO_ACTION_ITEM",payload:{retroId:e,actionItemId:t,description:n}}},I=function(e,t){return{type:"GET_RETRO_ARCHIVE",payload:{retroId:e,archiveId:t}}},w=function(e){return{type:"GET_RETRO_ARCHIVES",payload:e}},j=function(e,t,n){return{type:"CREATE_USER",payload:{accessToken:e,companyName:t,fullName:n}}},_=function(e,t,n){return{type:"CREATE_SESSION",payload:{accessToken:e,email:t,name:n}}},S=function(e,t,n,r,a,o,i,c){return{type:"UPDATE_RETRO_SETTINGS",payload:{retroId:e,retroName:t,newSlug:n,oldSlug:r,isPrivate:a,requestUuid:o,videoLink:i,isMagicLinkEnabled:c}}},T=function(e,t,n,r){return{type:"UPDATE_RETRO_PASSWORD",payload:{retroId:e,currentPassword:t,newPassword:n,requestUuid:r}}},C=function(){return{type:"RETRIEVE_CONFIG",payload:{}}}},20:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(12),a=n(13),o=function(){function e(){Object(r.a)(this,e)}return Object(a.a)(e,null,[{key:"debug",value:function(t){e.log(t,"DEBUG")}},{key:"info",value:function(t){e.log(t,"INFO")}},{key:"warn",value:function(t){e.log(t,"WARN")}},{key:"log",value:function(){}}]),e}()},226:function(e,t,n){"use strict";(function(e){var r=n(12),a=n(13),o=n(15),i=n(16),c=n(4),s=n(0),l=n.n(s),u=n(87),d=n.n(u),m=n(149),h=n.n(m),f=n(22),p=n(228),v=n.n(p),g=n(243),y=n(239),b=n(20),E=n(245),R=n(14),O=n(19),k=n(244),I=n(241),w=n(242),j=n(75);var _,S=h()({fontFamily:"Karla"}),T=new v.a({pushState:!0}),C=new I.a((function(){return e.Retro.config.api_base_url}),(function(){return localStorage.getItem("authToken")}),(function(){return _.dispatch(Object(R.p)({api_server_not_found:!0}))})),N=new w.a((function(){return e.Retro.config.enable_analytics}));_=Object(k.a)(T,C,N);var A=function(e){Object(o.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(c.a)(e);if(t()){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handleResize=function(){var e=window.innerWidth;_.dispatch({type:"WINDOW_SIZE_UPDATED",payload:{isMobile640:e<640,isMobile1030:e<=1030}})},e.updateWebsocketSession=function(e){_.dispatch(Object(R.w)(e))},e}return Object(a.a)(n,[{key:"componentDidMount",value:function(){b.a.info("Application started"),_.dispatch(Object(O.u)()),window.addEventListener("resize",this.handleResize),this.handleResize()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"render",value:function(){var e=this.props.config;return l.a.createElement(f.a,{store:_},l.a.createElement(d.a,{muiTheme:S},l.a.createElement("div",{className:"retro-application"},l.a.createElement(y.a,{config:e}),l.a.createElement(g.a,{config:e,router:T}),l.a.createElement(E.a,{url:Object(j.a)(e),websocketSessionDataReceived:this.updateWebsocketSession}))))}}]),n}(l.a.Component);t.a=A}).call(this,n(48))},232:function(e,t,n){e.exports=n.p+"static/media/happy.e2980c5f.svg"},233:function(e,t,n){e.exports=n.p+"static/media/meh.fc3d8f6f.svg"},234:function(e,t,n){e.exports=n.p+"static/media/sad.6c7c7305.svg"},235:function(e,t,n){e.exports=n.p+"static/media/action-tick-checked.1f08df83.svg"},236:function(e,t,n){e.exports=n.p+"static/media/action-tick-unchecked.0e3156db.svg"},237:function(e,t,n){e.exports=n.p+"static/media/face-dead.e3a01ea7.svg"},239:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(0),a=n.n(r),o=n(240),i=n.n(o),c=n(22),s=Object(c.b)((function(e){return{retro:e.retro.currentRetro}}))((function(e){var t=e.config,n=e.retro;return a.a.createElement(i.a,{title:n.name?n.name+" - "+t.title:t.title,link:[{rel:"icon",href:"/images/favicon.png?v=2"},{type:"text/plain",rel:"author",href:"/humans.txt"}]})}))},241:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(23),a=n(65),o=n(12),i=n(13),c=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return localStorage.getItem("authToken")},r=arguments.length>2?arguments[2]:void 0;Object(o.a)(this,e),this.apiLocationGetter=t,this.tokenGetter=n,this.apiServerNotFound=r}return Object(i.a)(e,[{key:"apiBaseUrl",value:function(){return this.apiLocationGetter()}},{key:"createRetro",value:function(e){return this.fetchJson("".concat(this.apiBaseUrl(),"/retros"),{method:"POST",headers:{"X-AUTH-TOKEN":this.tokenGetter()},body:JSON.stringify({retro:{name:e.name,slug:e.slug,password:e.password,is_private:e.isPrivate,is_magic_link_enabled:e.isMagicLinkEnabled}})})}},{key:"updateRetro",value:function(e,t,n,r,a,o,i,c){return this.fetchJson("".concat(this.apiBaseUrl(),"/retros/").concat(e),{method:"PATCH",accessToken:r,body:JSON.stringify({retro:{name:t,slug:n,is_private:a,video_link:i,is_magic_link_enabled:c},request_uuid:o})})}},{key:"getRetro",value:function(e,t){return this.fetchJson("".concat(this.apiBaseUrl(),"/retros/").concat(e),{accessToken:t})}},{key:"getRetros",value:function(){return this.fetchJson("".concat(this.apiBaseUrl(),"/retros"),{method:"GET",headers:{"X-AUTH-TOKEN":this.tokenGetter()}})}},{key:"getRetroSettings",value:function(e,t){return this.fetchJson("".concat(this.apiBaseUrl(),"/retros/").concat(e,"/settings"),{accessToken:t})}},{key:"getRetroLogin",value:function(e){return this.fetchJson("".concat(this.apiBaseUrl(),"/retros/").concat(e,"/sessions/new"))}},{key:"loginToRetro",value:function(e){var t=e.retro_id,n=e.password;return this.fetchJson("".concat(this.apiBaseUrl(),"/retros/").concat(t,"/sessions"),{method:"POST",body:JSON.stringify({retro:{password:n}})})}},{key:"joinRetro",value:function(e){var t=e.retro_id,n=e.join_token;return this.fetchJson("".concat(this.apiBaseUrl(),"/retros/").concat(t,"/sessions"),{method:"POST",body:JSON.stringify({retro:{join_token:n}})})}},{key:"createRetroItem",value:function(e,t,n,r){return this.fetchJson("".concat(this.apiBaseUrl(),"/retros/").concat(e,"/items"),{method:"POST",accessToken:r,body:JSON.stringify({description:n,category:t})})}},{key:"updateRetroItem",value:function(e,t,n,r){return this.fetchJson("".concat(this.apiBaseUrl(),"/retros/").concat(e,"/items/").concat(t),{method:"PATCH",accessToken:r,body:JSON.stringify({description:n})})}},{key:"deleteRetroItem",value:function(e,t,n){return this.fetchJson("".concat(this.apiBaseUrl(),"/retros/").concat(e,"/items/").concat(t),{method:"DELETE",accessToken:n})}},{key:"voteRetroItem",value:function(e,t,n){return this.fetchJson("".concat(this.apiBaseUrl(),"/retros/").concat(e,"/items/").concat(t,"/vote"),{method:"POST",accessToken:n})}},{key:"nextRetroItem",value:function(e,t){return this.fetchJson("".concat(this.apiBaseUrl(),"/retros/").concat(e,"/discussion/transitions"),{method:"POST",accessToken:t,body:JSON.stringify({transition:"NEXT"})})}},{key:"highlightRetroItem",value:function(e,t,n){return this.fetchJson("".concat(this.apiBaseUrl(),"/retros/").concat(e,"/discussion"),{method:"POST",accessToken:n,body:JSON.stringify({item_id:t})})}},{key:"unhighlightRetroItem",value:function(e,t){return this.fetchJson("".concat(this.apiBaseUrl(),"/retros/").concat(e,"/discussion"),{method:"DELETE",accessToken:t})}},{key:"doneRetroItem",value:function(e,t,n){return this.fetchJson("".concat(this.apiBaseUrl(),"/retros/").concat(e,"/items/").concat(t,"/done"),{method:"PATCH",accessToken:n})}},{key:"undoneRetroItem",value:function(e,t,n){return this.fetchJson("".concat(this.apiBaseUrl(),"/retros/").concat(e,"/items/").concat(t,"/done"),{method:"PATCH",accessToken:n,body:JSON.stringify({done:!1})})}},{key:"extendTimer",value:function(e,t){return this.fetchJson("".concat(this.apiBaseUrl(),"/retros/").concat(e,"/discussion"),{method:"PATCH",accessToken:t})}},{key:"archiveRetro",value:function(e,t,n){return this.fetchJson("".concat(this.apiBaseUrl(),"/retros/").concat(e,"/archive"),{method:"PUT",accessToken:t,body:JSON.stringify({send_archive_email:n})})}},{key:"createRetroActionItem",value:function(e,t,n){return this.fetchJson("".concat(this.apiBaseUrl(),"/retros/").concat(e,"/action_items"),{method:"POST",accessToken:n,body:JSON.stringify({description:t})})}},{key:"deleteRetroActionItem",value:function(e,t,n){return this.fetchJson("".concat(this.apiBaseUrl(),"/retros/").concat(e,"/action_items/").concat(t),{method:"DELETE",accessToken:n})}},{key:"doneRetroActionItem",value:function(e,t,n,r){return this.fetchJson("".concat(this.apiBaseUrl(),"/retros/").concat(e,"/action_items/").concat(t),{method:"PATCH",accessToken:r,body:JSON.stringify({done:n})})}},{key:"editRetroActionItem",value:function(e,t,n,r){return this.fetchJson("".concat(this.apiBaseUrl(),"/retros/").concat(e,"/action_items/").concat(t),{method:"PATCH",accessToken:r,body:JSON.stringify({description:n})})}},{key:"getRetroArchive",value:function(e,t,n){return this.fetchJson("".concat(this.apiBaseUrl(),"/retros/").concat(e,"/archives/").concat(t),{accessToken:n})}},{key:"getRetroArchives",value:function(e,t){return this.fetchJson("".concat(this.apiBaseUrl(),"/retros/").concat(e,"/archives"),{accessToken:t})}},{key:"createUser",value:function(e,t,n){return this.fetchJson("".concat(this.apiBaseUrl(),"/users"),{method:"POST",body:JSON.stringify({access_token:e,company_name:t,full_name:n})})}},{key:"createSession",value:function(e){return this.fetchJson("".concat(this.apiBaseUrl(),"/sessions"),{method:"POST",body:JSON.stringify({access_token:e})})}},{key:"updateRetroPassword",value:function(e,t,n,r,a){return this.fetchJson("".concat(this.apiBaseUrl(),"/retros/").concat(e,"/password"),{method:"PATCH",accessToken:a,body:JSON.stringify({current_password:t,new_password:n,request_uuid:r})})}},{key:"retrieveConfig",value:function(){return this.fetchJson("".concat(this.apiBaseUrl(),"/config"))}},{key:"fetchJson",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.accessToken,i=n.headers,c=Object(a.a)(n,["accessToken","headers"]),s={accept:"application/json","Content-Type":"application/json"},l=o?{authorization:"Bearer ".concat(o)}:{},u=Object(r.a)({credentials:"same-origin",headers:Object(r.a)(Object(r.a)(Object(r.a)({},s),l),i)},c);return fetch(e,u).then((function(e){return 204===e.status?[e.status,""]:Promise.all([e.status,e.json()])})).catch((function(){return t.apiServerNotFound(),[]}))}}]),e}()},242:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(12),a=n(13),o=n(154),i=n.n(o),c=function(){function e(t){Object(r.a)(this,e),this.enableAnalyticsFn=t}return Object(a.a)(e,[{key:"track",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.enableAnalyticsFn()&&(e.initialized||(i.a.init("d4de349453cc697734eced9ebedcdb22"),e.initialized=!0),i.a.track(t,Object.assign({timestamp:(new Date).toJSON()},n)))}}]),e}();c.initialized=!1},243:function(e,t,n){"use strict";n.d(t,"a",(function(){return ft}));var r=n(12),a=n(13),o=n(15),i=n(16),c=n(4),s=n(0),l=n.n(s),u=n(22),d=n(11),m=n(37),h=n.n(m),f=/^[A-Za-z0-9-]+$/,p={trackStyle:{backgroundColor:"#C7C7C7",borderRadius:"3px",height:"2.125rem",width:"5rem"},trackSwitchedStyle:{backgroundColor:"#FEC722",borderRadius:"3px"},labelStyle:{marginLeft:"1.2rem",paddingTop:"0.5rem",fontWeight:"bold"},thumbStyle:{backgroundColor:"white",borderRadius:"3px",marginTop:"0.6rem",marginLeft:"0.6rem"},thumbSwitchedStyle:{backgroundColor:"white"},iconStyle:{width:"4.5rem"}},v=n(47),g=n.n(v),y=n(89),b=n.n(y),E=n(19),R=n(17),O=n(14);var k=function(e){Object(o.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(c.a)(e);if(t()){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).validateName=function(e){return e?"":"Your project needs a team name!"},a.validateSlug=function(e){return e?e.length>236?"Your URL is too long!":e.match(f)?"":"Your URL should only contain letters, numbers or hyphens!":"Your project needs a URL!"},a.validatePassword=function(e){return e?"":"Your project needs a password!"},a.togglePrivate=function(){a.setState((function(e){return{isPrivate:!e.isPrivate}}))},a.toggleMagicLinkEnabled=function(){a.setState((function(e){return{isMagicLinkEnabled:!e.isMagicLinkEnabled}}))},a.state={name:"",slug:"",password:"",isPrivate:!0,isMagicLinkEnabled:!1,errors:{name:"",slug:"",password:""}},a.togglePrivate=a.togglePrivate.bind(Object(d.a)(a)),a.submit=a.submit.bind(Object(d.a)(a)),a.onChangeName=a.onChange.bind(Object(d.a)(a),"name"),a.onChangeSlug=a.onChange.bind(Object(d.a)(a),"slug"),a.onChangePassword=a.onChange.bind(Object(d.a)(a),"password"),a}return Object(a.a)(n,[{key:"componentWillMount",value:function(){localStorage.getItem("authToken")||this.props.redirectToHome()}},{key:"componentWillReceiveProps",value:function(e){e.errors?this.setState({errors:{slug:e.errors.slug}}):this.setState({errors:{}})}},{key:"componentWillUnmount",value:function(){this.props.clearErrors()}},{key:"submit",value:function(){var e={};e.name=this.validateName(this.state.name),e.slug=this.validateSlug(this.state.slug),e.password=this.validatePassword(this.state.password),this.setState({errors:e}),e.name||e.slug||e.password||this.props.retroCreate({name:this.state.name,slug:this.state.slug,password:this.state.password,isPrivate:this.state.isPrivate,isMagicLinkEnabled:this.state.isMagicLinkEnabled})}},{key:"getCurrentHost",value:function(){return window.location.origin.split("://")[1]}},{key:"onChange",value:function(e,t){var n=t.target.value,r={};"name"===e&&(r.name=this.validateName(n)),"slug"===e&&(r.slug=this.validateSlug(n)),"password"===e&&(r.password=this.validatePassword(n)),this.setState((function(t){return{[e]:n,errors:Object.assign({},t.errors,r)}}))}},{key:"renderAccessInstruction",value:function(){var e=l.a.createElement("div",null,l.a.createElement("img",{className:"icon-locked",src:g.a,alt:"Locked"})," ","The password is needed to view or participate."),t=l.a.createElement("div",null,l.a.createElement("img",{className:"icon-locked",src:b.a,alt:"Unlocked"})," ","Anyone can view or participate ",l.a.createElement("strong",null,"without")," entering password.");return l.a.createElement("div",{className:"access-instruction"},this.state.isPrivate?e:t,l.a.createElement("br",null),"Password is always required to: ",l.a.createElement("br",null),l.a.createElement("img",{className:"icon-locked",src:g.a,alt:"Locked"})," Access archives",l.a.createElement("br",null),l.a.createElement("img",{className:"icon-locked",src:g.a,alt:"Locked"})," Edit settings")}},{key:"render",value:function(){var e=this.state,t=e.name,n=e.slug,r=e.password,a=e.isPrivate,o=e.isMagicLinkEnabled,i=e.errors,c=p;return l.a.createElement("div",{className:"new-retro-page"},l.a.createElement("div",null,l.a.createElement("div",{className:"medium-6 small-12 columns new-retro-msg new-retro-column"},l.a.createElement("div",{className:"medium-centered small-centered"},"Time to make your team retro!")),l.a.createElement("div",{className:"medium-6 small-12 columns new-retro-column"},l.a.createElement("div",{className:"medium-centered small-centered",style:{width:"30rem"}},l.a.createElement("div",{className:"row"},l.a.createElement("label",{className:"label"},"What's your team called?"),l.a.createElement("input",{id:"retro_name",value:t,type:"text",name:"name",className:"form-input ".concat(i.name?"input-error":""),onChange:this.onChangeName,placeholder:"Team name"}),l.a.createElement("div",{className:"error-message"},i.name)),l.a.createElement("div",{className:"row"},l.a.createElement("label",{className:"label"},"Choose a team URL"),l.a.createElement("div",{className:"input-group retro-url"},l.a.createElement("span",{className:"input-group-label retro-url-prefix"},this.getCurrentHost(),"/retros/"),l.a.createElement("input",{id:"retro_url",value:n,type:"text",name:"slug",className:"input-group-field form-input ".concat(i.slug?"input-error":""),onChange:this.onChangeSlug,placeholder:"team-name"})),l.a.createElement("div",{className:"error-message"},i.slug)),l.a.createElement("div",{className:"row"},l.a.createElement("label",{className:"label"},"Create a team password"),l.a.createElement("input",{id:"retro_password",value:r,type:"password",name:"password",className:"form-input ".concat(i.password?"input-error":""),onChange:this.onChangePassword,placeholder:"Create password"}),l.a.createElement("div",{className:"error-message"},i.password)),l.a.createElement("div",{className:"row"},l.a.createElement("label",{className:"label",htmlFor:"retro_is_private"},"Do people need the password to ",l.a.createElement("strong",null,"access")," this retro?"),l.a.createElement(h.a,{id:"retro_is_private",name:"isPrivate",label:a?"Yes":"No",labelPosition:"right",toggled:a,onToggle:this.togglePrivate,trackStyle:c.trackStyle,trackSwitchedStyle:c.trackSwitchedStyle,labelStyle:c.labelStyle,thumbStyle:c.thumbStyle,thumbSwitchedStyle:c.thumbSwitchedStyle,iconStyle:c.iconStyle}),this.renderAccessInstruction()),l.a.createElement("div",{className:"row"},l.a.createElement("label",{className:"label",htmlFor:"retro_is_magic_link_enabled"},"Can participants share this retro using a magic link?"),l.a.createElement(h.a,{id:"retro_is_magic_link_enabled",name:"isMagicLinkEnabled",label:o?"Yes":"No",labelPosition:"right",toggled:o,onToggle:this.toggleMagicLinkEnabled,trackStyle:c.trackStyle,trackSwitchedStyle:c.trackSwitchedStyle,labelStyle:c.labelStyle,thumbStyle:c.thumbStyle,thumbSwitchedStyle:c.thumbSwitchedStyle,iconStyle:c.iconStyle}),l.a.createElement("div",{className:"access-instruction"},"This will provide a magic link that allows users to access this retro without being prompted for a password. This is not the same as making a retro public.")),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"medium-6 small-12 columns",style:{paddingLeft:"0",paddingRight:"0"}},l.a.createElement("input",{type:"submit",className:"retro-form-submit expanded button",id:"create_new_retro",value:"Create Retro",onClick:this.submit})))))))}}]),n}(l.a.Component);k.defaultProps={errors:null};var I=Object(u.b)((function(e){return{errors:e.messages.errors}}),(function(e){return{redirectToHome:function(){return e(Object(R.a)())},clearErrors:function(){return e(Object(O.c)())},retroCreate:function(t){return e(Object(E.v)(t))}}}))(k),w=n(38);function j(e){var t=e.config;return l.a.createElement("div",{className:"footer"},l.a.createElement("div",{className:"links"},l.a.createElement("a",{href:t.contact},"Contact Us"),l.a.createElement("a",{target:"_blank",href:t.terms,rel:"noopener noreferrer"},"Terms & Conditions"),l.a.createElement("a",{target:"_blank",href:t.privacy,rel:"noopener noreferrer"},"Privacy Policy")))}function _(e){var t=e.callback,n=e.retro;return l.a.createElement("div",{className:"retro-list-tile",onClick:t},n.name)}_.defaultProps={callback:null};var S=function(e){Object(o.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(c.a)(e);if(t()){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).handleNewRetroButtonClicked=a.handleNewRetroButtonClicked.bind(Object(d.a)(a)),a.handleSignOutButtonClicked=a.handleSignOutButtonClicked.bind(Object(d.a)(a)),a}return Object(a.a)(n,[{key:"componentWillMount",value:function(){this.props.getRetros()}},{key:"handleRetroListItemClicked",value:function(e){this.props.navigateTo(Object(R.j)(e))}},{key:"handleNewRetroButtonClicked",value:function(){this.props.navigateTo(Object(R.b)())}},{key:"handleSignOutButtonClicked",value:function(){this.props.signOut()}},{key:"render",value:function(){var e=this,t=this.props,n=t.config,r=t.retros.map((function(t){return l.a.createElement(_,{key:t.slug,callback:function(){return e.handleRetroListItemClicked(t)},retro:t})}));return l.a.createElement("div",{className:"list-retros-page full-height"},l.a.createElement("div",{className:"retro-heading"},l.a.createElement("span",{className:"retro-heading-content"},l.a.createElement("div",{className:"retro-name"},l.a.createElement("h1",null,"My Retros")),l.a.createElement("div",{className:"retro-heading-buttons"},l.a.createElement(w.c,{className:"new-retro",backgroundColor:"#2574a9",labelColor:"#f8f8f8",label:"NEW RETRO",onClick:this.handleNewRetroButtonClicked}),l.a.createElement(w.c,{className:"sign-out",backgroundColor:"#2574a9",labelColor:"#f8f8f8",label:"SIGN OUT",onClick:this.handleSignOutButtonClicked})))),l.a.createElement("div",{className:"retro-tiles-container"},l.a.createElement("div",{className:"retro-tiles"},r)),l.a.createElement(j,{config:n}))}}]),n}(l.a.Component),T=Object(u.b)((function(e){return{retros:e.retro.retros}}),(function(e){return{navigateTo:function(t){return e(t)},signOut:function(){return e(Object(O.s)())},getRetros:function(){return e(Object(O.n)())}}}))(S),C=n(46),N=n(229),A=n(23),P=n(65),D=n(91),x=n.n(D);var M=function(e){Object(o.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(c.a)(e);if(t()){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"fromPoints",value:function(e){return Array.isArray(e)?String.fromCodePoint.apply(String,Object(C.a)(e)):String.fromCodePoint(e)}},{key:"renderCodepointRange",value:function(e){var t=this,n=this.props.onSelect;return e.map((function(e){var r=t.fromPoints(e);return l.a.createElement("span",{key:r,className:"emoji-selector-option",onMouseDown:function(e){return n(e,r)}},r)}))}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"emoji-selector"},n.ranges.map((function(t){var n=t.name,r=t.values;return l.a.createElement("div",{key:n,className:"emoji-selector-group"},l.a.createElement("h1",null,n),e.renderCodepointRange(r))})))}}]),n}(l.a.Component);function U(e){return 0!==e.value.trim().length}M.ranges=[{name:"Smileys & Emotion",values:[128512,128515,128516,128513,128518,128517,129315,128514,128578,128579,128521,128522,128519,129392,128525,129321,128536,128535,128538,128537,128523,128539,128540,129322,128541,129297,129303,129325,129323,129300,129296,129320,128528,128529,128566,128527,128530,128580,128556,129317,128524,128532,128554,129316,128564,128567,129298,129301,129314,129326,129319,129397,129398,129396,128565,129327,129312,129395,128526,129299,129488,128533,128543,128577,9785,128558,128559,128562,128563,129402,128550,128551,128552,128560,128549,128546,128557,128561,128534,128547,128542,128531,128553,128555,128548,128545,128544,129324,128520,128127,128128,9760,128169,129313,128121,128122,128123,128125,128126,129302,128570,128568,128569,128571,128572,128573,128576,128575,128574,128584,128585,128586,128139,128140,128152,128157,128150,128151,128147,128158,128149,128159,10083,128148,10084,129505,128155,128154,128153,128156,128420,128175,128162,128165,128171,128166,128168,128371,128163,128172,[128065,65039,8205,128488,65039],128488,128495,128173,128164]},{name:"People & Body",values:[128075,129306,128400,9995,128406,128076,9996,129310,129311,129304,129305,128072,128073,128070,128405,128071,9757,128077,128078,9994,128074,129307,129308,128079,128588,128080,129330,129309,128591,9997,128133,129331,128170,129461,129462,128066,128067,129504,129463,129460,128064,128065,128069,128068,128118,129490,128102,128103,129489,128113,128104,129492,[128113,8205,9794,65039],[128104,8205,129456],[128104,8205,129457],[128104,8205,129459],[128104,8205,129458],128105,[128113,8205,9792,65039],[128105,8205,129456],[128105,8205,129457],[128105,8205,129459],[128105,8205,129458],129491,128116,128117,128589,[128589,8205,9794,65039],[128589,8205,9792,65039],128590,[128590,8205,9794,65039],[128590,8205,9792,65039],128581,[128581,8205,9794,65039],[128581,8205,9792,65039],128582,[128582,8205,9794,65039],[128582,8205,9792,65039],128129,[128129,8205,9794,65039],[128129,8205,9792,65039],128587,[128587,8205,9794,65039],[128587,8205,9792,65039],128583,[128583,8205,9794,65039],[128583,8205,9792,65039],129318,[129318,8205,9794,65039],[129318,8205,9792,65039],129335,[129335,8205,9794,65039],[129335,8205,9792,65039],[128104,8205,9877,65039],[128105,8205,9877,65039],[128104,8205,127891],[128105,8205,127891],[128104,8205,127979],[128105,8205,127979],[128104,8205,9878,65039],[128105,8205,9878,65039],[128104,8205,127806],[128105,8205,127806],[128104,8205,127859],[128105,8205,127859],[128104,8205,128295],[128105,8205,128295],[128104,8205,127981],[128105,8205,127981],[128104,8205,128188],[128105,8205,128188],[128104,8205,128300],[128105,8205,128300],[128104,8205,128187],[128105,8205,128187],[128104,8205,127908],[128105,8205,127908],[128104,8205,127912],[128105,8205,127912],[128104,8205,9992,65039],[128105,8205,9992,65039],[128104,8205,128640],[128105,8205,128640],[128104,8205,128658],[128105,8205,128658],128110,[128110,8205,9794,65039],[128110,8205,9792,65039],128373,[128373,65039,8205,9794,65039],[128373,65039,8205,9792,65039],128130,[128130,8205,9794,65039],[128130,8205,9792,65039],128119,[128119,8205,9794,65039],[128119,8205,9792,65039],129332,128120,128115,[128115,8205,9794,65039],[128115,8205,9792,65039],128114,129493,129333,128112,129328,129329,128124,127877,129334,129464,[129464,8205,9794,65039],[129464,8205,9792,65039],129465,[129465,8205,9794,65039],[129465,8205,9792,65039],129497,[129497,8205,9794,65039],[129497,8205,9792,65039],129498,[129498,8205,9794,65039],[129498,8205,9792,65039],129499,[129499,8205,9794,65039],[129499,8205,9792,65039],129500,[129500,8205,9794,65039],[129500,8205,9792,65039],129501,[129501,8205,9794,65039],[129501,8205,9792,65039],129502,[129502,8205,9794,65039],[129502,8205,9792,65039],129503,[129503,8205,9794,65039],[129503,8205,9792,65039],128134,[128134,8205,9794,65039],[128134,8205,9792,65039],128135,[128135,8205,9794,65039],[128135,8205,9792,65039],128694,[128694,8205,9794,65039],[128694,8205,9792,65039],127939,[127939,8205,9794,65039],[127939,8205,9792,65039],128131,128378,128372,128111,[128111,8205,9794,65039],[128111,8205,9792,65039],129494,[129494,8205,9794,65039],[129494,8205,9792,65039],129495,[129495,8205,9794,65039],[129495,8205,9792,65039],129338,127943,9975,127938,127948,[127948,65039,8205,9794,65039],[127948,65039,8205,9792,65039],127940,[127940,8205,9794,65039],[127940,8205,9792,65039],128675,[128675,8205,9794,65039],[128675,8205,9792,65039],127946,[127946,8205,9794,65039],[127946,8205,9792,65039],9977,[9977,65039,8205,9794,65039],[9977,65039,8205,9792,65039],127947,[127947,65039,8205,9794,65039],[127947,65039,8205,9792,65039],128692,[128692,8205,9794,65039],[128692,8205,9792,65039],128693,[128693,8205,9794,65039],[128693,8205,9792,65039],129336,[129336,8205,9794,65039],[129336,8205,9792,65039],129340,[129340,8205,9794,65039],[129340,8205,9792,65039],129341,[129341,8205,9794,65039],[129341,8205,9792,65039],129342,[129342,8205,9794,65039],[129342,8205,9792,65039],129337,[129337,8205,9794,65039],[129337,8205,9792,65039],129496,[129496,8205,9794,65039],[129496,8205,9792,65039],128704,128716,[129489,8205,129309,8205,129489],128109,128107,128108,128143,[128105,8205,10084,65039,8205,128139,8205,128104],[128104,8205,10084,65039,8205,128139,8205,128104],[128105,8205,10084,65039,8205,128139,8205,128105],128145,[128105,8205,10084,65039,8205,128104],[128104,8205,10084,65039,8205,128104],[128105,8205,10084,65039,8205,128105],128106,[128104,8205,128105,8205,128102],[128104,8205,128105,8205,128103],[128104,8205,128105,8205,128103,8205,128102],[128104,8205,128105,8205,128102,8205,128102],[128104,8205,128105,8205,128103,8205,128103],[128104,8205,128104,8205,128102],[128104,8205,128104,8205,128103],[128104,8205,128104,8205,128103,8205,128102],[128104,8205,128104,8205,128102,8205,128102],[128104,8205,128104,8205,128103,8205,128103],[128105,8205,128105,8205,128102],[128105,8205,128105,8205,128103],[128105,8205,128105,8205,128103,8205,128102],[128105,8205,128105,8205,128102,8205,128102],[128105,8205,128105,8205,128103,8205,128103],[128104,8205,128102],[128104,8205,128102,8205,128102],[128104,8205,128103],[128104,8205,128103,8205,128102],[128104,8205,128103,8205,128103],[128105,8205,128102],[128105,8205,128102,8205,128102],[128105,8205,128103],[128105,8205,128103,8205,128102],[128105,8205,128103,8205,128103],128483,128100,128101,128099]},{name:"Animals & Nature",values:[128053,128018,129421,128054,128021,128041,128058,129418,129437,128049,128008,129409,128047,128005,128006,128052,128014,129412,129427,129420,128046,128002,128003,128004,128055,128022,128023,128061,128015,128017,128016,128042,128043,129433,129426,128024,129423,129435,128045,128001,128e3,128057,128048,128007,128063,129428,129415,128059,128040,128060,129432,129441,128062,129411,128020,128019,128035,128036,128037,128038,128039,128330,129413,129414,129442,129417,129434,129436,128056,128010,128034,129422,128013,128050,128009,129429,129430,128051,128011,128044,128031,128032,128033,129416,128025,128026,128012,129419,128027,128028,128029,128030,129431,128375,128376,129410,129439,129440,128144,127800,128174,127989,127801,129344,127802,127803,127804,127799,127793,127794,127795,127796,127797,127806,127807,9752,127808,127809,127810,127811]},{name:"Food & Drink",values:[127815,127816,127817,127818,127819,127820,127821,129389,127822,127823,127824,127825,127826,127827,129373,127813,129381,129361,127814,129364,129365,127805,127798,129362,129388,129382,127812,129372,127792,127838,129360,129366,129384,129391,129374,129472,127830,127831,129385,129363,127828,127839,127829,127789,129386,127790,127791,129369,129370,127859,129368,127858,129379,129367,127871,129474,129387,127857,127832,127833,127834,127835,127836,127837,127840,127842,127843,127844,127845,129390,127841,129375,129376,129377,129408,129438,129424,129425,127846,127847,127848,127849,127850,127874,127856,129473,129383,127851,127852,127853,127854,127855,127868,129371,9749,127861,127862,127870,127863,127864,127865,127866,127867,129346,129347,129380,129378,127869,127860,129348,128298,127994]},{name:"Travel & Places",values:[127757,127758,127759,127760,128506,128510,129517,127956,9968,127755,128507,127957,127958,127964,127965,127966,127967,127963,127959,129521,127960,127962,127968,127969,127970,127971,127972,127973,127974,127976,127977,127978,127979,127980,127981,127983,127984,128146,128508,128509,9962,128332,128333,9961,128331,9970,9978,127745,127747,127961,127748,127749,127750,127751,127753,9832,127904,127905,127906,128136,127914,128642,128643,128644,128645,128646,128647,128648,128649,128650,128669,128670,128651,128652,128653,128654,128656,128657,128658,128659,128660,128661,128662,128663,128664,128665,128666,128667,128668,127950,127949,128757,128690,128756,128761,128655,128739,128740,128738,9981,128680,128677,128678,128721,128679,9875,9973,128758,128676,128755,9972,128741,128674,9992,128745,128747,128748,128186,128641,128671,128672,128673,128752,128640,128760,128718,129523,8987,9203,8986,9200,9201,9202,128368,128347,128359,128336,128348,128337,128349,128338,128350,128339,128351,128340,128352,128341,128353,128342,128354,128343,128355,128344,128356,128345,128357,128346,128358,127761,127762,127763,127764,127765,127766,127767,127768,127769,127770,127771,127772,127777,9728,127773,127774,11088,127775,127776,127756,9729,9925,9928,127780,127781,127782,127783,127784,127785,127786,127787,127788,127744,127752,127746,9730,9748,9969,9889,10052,9731,9924,9732,128293,128167,127754]},{name:"Activities",values:[127875,127876,127878,127879,129512,10024,127880,127881,127882,127883,127885,127886,127887,127888,127889,129511,127872,127873,127895,127903,127915,127894,127942,127941,129351,129352,129353,9917,9918,129358,127936,127952,127944,127945,127934,129359,127923,127951,127953,127954,129357,127955,127992,129354,129355,129349,9971,9976,127907,127933,127935,128759,129356,127919,127921,128302,129535,127918,128377,127920,127922,129513,129528,9824,9829,9830,9827,9823,127183,126980,127924,127917,128444,127912,129525,129526]},{name:"Objects",values:[128083,128374,129405,129404,128084,128085,128086,129507,129508,129509,129510,128087,128088,128089,128090,128091,128092,128093,128717,127890,128094,128095,129406,129407,128096,128097,128098,128081,128082,127913,127891,129506,9937,128255,128132,128141,128142,128263,128264,128265,128266,128226,128227,128239,128276,128277,127932,127925,127926,127897,127898,127899,127908,127911,128251,127927,127928,127929,127930,127931,129345,128241,128242,9742,128222,128223,128224,128267,128268,128187,128421,128424,9e3,128433,128434,128189,128190,128191,128192,129518,127909,127902,128253,127916,128250,128247,128248,128249,128252,128269,128270,128367,128161,128294,127982,128212,128213,128214,128215,128216,128217,128218,128211,128210,128195,128220,128196,128240,128478,128209,128278,127991,128176,128180,128181,128182,128183,128184,128179,129534,128185,128177,128178,9993,128231,128232,128233,128228,128229,128230,128235,128234,128236,128237,128238,128499,9999,10002,128395,128394,128396,128397,128221,128188,128193,128194,128450,128197,128198,128466,128467,128199,128200,128201,128202,128203,128204,128205,128206,128391,128207,128208,9986,128451,128452,128465,128274,128275,128271,128272,128273,128477,128296,9935,9874,128736,128481,9876,128299,127993,128737,128295,128297,9881,128476,9878,128279,9939,129520,129522,9879,129514,129515,129516,128300,128301,128225,128137,128138,128682,128719,128715,128701,128703,128705,129524,129527,129529,129530,129531,129532,129533,129519,128722,128684,9904,9905,128511]},{name:"Symbols",values:[127975,128686,128688,9855,128697,128698,128699,128700,128702,128706,128707,128708,128709,9888,128696,9940,128683,128691,128685,128687,128689,128695,128245,128286,9762,9763,11014,8599,10145,8600,11015,8601,11013,8598,8597,8596,8617,8618,10548,10549,128259,128260,128281,128282,128283,128284,128285,128720,9883,128329,10017,9784,9775,10013,9766,9770,9774,128334,128303,9800,9801,9802,9803,9804,9805,9806,9807,9808,9809,9810,9811,9934,128256,128257,128258,9654,9193,9197,9199,9664,9194,9198,128316,9195,128317,9196,9208,9209,9210,9167,127910,128261,128262,128246,128243,128244,9792,9794,9877,9854,9851,9884,128305,128219,128304,11093,9989,9745,10004,10006,10060,10062,10133,10134,10135,10160,10175,12349,10035,10036,10055,8252,8265,10067,10068,10069,10071,12336,169,174,8482,[35,65039,8419],[42,65039,8419],[48,65039,8419],[49,65039,8419],[50,65039,8419],[51,65039,8419],[52,65039,8419],[53,65039,8419],[54,65039,8419],[55,65039,8419],[56,65039,8419],[57,65039,8419],128287,128288,128289,128290,128291,128292,127344,127374,127345,127377,127378,127379,8505,127380,9410,127381,127382,127358,127383,127359,127384,127385,127386,127489,127490,127543,127542,127535,127568,127545,127514,127538,127569,127544,127540,127539,12951,12953,127546,127541,128308,128309,9899,9898,11035,11036,9724,9723,9726,9725,9642,9643,128310,128311,128312,128313,128314,128315,128160,128280,128307,128306]},{name:"Flags",values:[127937,128681,127884,127988,127987,[127987,65039,8205,127752],[127988,8205,9760,65039],[127462,127464],[127462,127465],[127462,127466],[127462,127467],[127462,127468],[127462,127470],[127462,127473],[127462,127474],[127462,127476],[127462,127478],[127462,127479],[127462,127480],[127462,127481],[127462,127482],[127462,127484],[127462,127485],[127462,127487],[127463,127462],[127463,127463],[127463,127465],[127463,127466],[127463,127467],[127463,127468],[127463,127469],[127463,127470],[127463,127471],[127463,127473],[127463,127474],[127463,127475],[127463,127476],[127463,127478],[127463,127479],[127463,127480],[127463,127481],[127463,127483],[127463,127484],[127463,127486],[127463,127487],[127464,127462],[127464,127464],[127464,127465],[127464,127467],[127464,127468],[127464,127469],[127464,127470],[127464,127472],[127464,127473],[127464,127474],[127464,127475],[127464,127476],[127464,127477],[127464,127479],[127464,127482],[127464,127483],[127464,127484],[127464,127485],[127464,127486],[127464,127487],[127465,127466],[127465,127468],[127465,127471],[127465,127472],[127465,127474],[127465,127476],[127465,127487],[127466,127462],[127466,127464],[127466,127466],[127466,127468],[127466,127469],[127466,127479],[127466,127480],[127466,127481],[127466,127482],[127467,127470],[127467,127471],[127467,127472],[127467,127474],[127467,127476],[127467,127479],[127468,127462],[127468,127463],[127468,127465],[127468,127466],[127468,127467],[127468,127468],[127468,127469],[127468,127470],[127468,127473],[127468,127474],[127468,127475],[127468,127477],[127468,127478],[127468,127479],[127468,127480],[127468,127481],[127468,127482],[127468,127484],[127468,127486],[127469,127472],[127469,127474],[127469,127475],[127469,127479],[127469,127481],[127469,127482],[127470,127464],[127470,127465],[127470,127466],[127470,127473],[127470,127474],[127470,127475],[127470,127476],[127470,127478],[127470,127479],[127470,127480],[127470,127481],[127471,127466],[127471,127474],[127471,127476],[127471,127477],[127472,127466],[127472,127468],[127472,127469],[127472,127470],[127472,127474],[127472,127475],[127472,127477],[127472,127479],[127472,127484],[127472,127486],[127472,127487],[127473,127462],[127473,127463],[127473,127464],[127473,127470],[127473,127472],[127473,127479],[127473,127480],[127473,127481],[127473,127482],[127473,127483],[127473,127486],[127474,127462],[127474,127464],[127474,127465],[127474,127466],[127474,127467],[127474,127468],[127474,127469],[127474,127472],[127474,127473],[127474,127474],[127474,127475],[127474,127476],[127474,127477],[127474,127478],[127474,127479],[127474,127480],[127474,127481],[127474,127482],[127474,127483],[127474,127484],[127474,127485],[127474,127486],[127474,127487],[127475,127462],[127475,127464],[127475,127466],[127475,127467],[127475,127468],[127475,127470],[127475,127473],[127475,127476],[127475,127477],[127475,127479],[127475,127482],[127475,127487],[127476,127474],[127477,127462],[127477,127466],[127477,127467],[127477,127468],[127477,127469],[127477,127472],[127477,127473],[127477,127474],[127477,127475],[127477,127479],[127477,127480],[127477,127481],[127477,127484],[127477,127486],[127478,127462],[127479,127466],[127479,127476],[127479,127480],[127479,127482],[127479,127484],[127480,127462],[127480,127463],[127480,127464],[127480,127465],[127480,127466],[127480,127468],[127480,127469],[127480,127470],[127480,127471],[127480,127472],[127480,127473],[127480,127474],[127480,127475],[127480,127476],[127480,127479],[127480,127480],[127480,127481],[127480,127483],[127480,127485],[127480,127486],[127480,127487],[127481,127462],[127481,127464],[127481,127465],[127481,127467],[127481,127468],[127481,127469],[127481,127471],[127481,127472],[127481,127473],[127481,127474],[127481,127475],[127481,127476],[127481,127479],[127481,127481],[127481,127483],[127481,127484],[127481,127487],[127482,127462],[127482,127468],[127482,127474],[127482,127475],[127482,127480],[127482,127486],[127482,127487],[127483,127462],[127483,127464],[127483,127466],[127483,127468],[127483,127470],[127483,127475],[127483,127482],[127484,127467],[127484,127480],[127485,127472],[127486,127466],[127486,127481],[127487,127462],[127487,127474],[127487,127484]]}];var L=function(e){Object(o.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(c.a)(e);if(t()){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={inputText:"",isFocused:!1,multiline:""},a.submitRetroItem=a.submitRetroItem.bind(Object(d.a)(a)),a.inputFocus=a.inputFocus.bind(Object(d.a)(a)),a.inputBlur=a.inputBlur.bind(Object(d.a)(a)),a.onChange=a.onChange.bind(Object(d.a)(a)),a.onKeyPress=a.onKeyPress.bind(Object(d.a)(a)),a.onResize=a.onResize.bind(Object(d.a)(a)),a}return Object(a.a)(n,[{key:"resolvePlaceholder",value:function(){var e=this.props.category;return"happy"===e?"I'm glad that...":"meh"===e?"I'm wondering about...":"sad"===e?"It wasn't so great that...":"Add an action item"}},{key:"onKeyPress",value:function(e){"Enter"!==e.key||e.shiftKey||(""!==e.target.value&&this.submitRetroItem(),e.preventDefault())}},{key:"submitRetroItem",value:function(){var e=this.props,t=e.retroId,n=e.category,r=this.state.inputText;"action"===n?this.props.createRetroActionItem(t,r):this.props.createRetroItem(t,n,r),this.setState({inputText:"",multiline:""})}},{key:"onChange",value:function(e){U(e.target)||this.setState({multiline:""}),this.setState({inputText:e.target.value})}},{key:"onResize",value:function(e){var t=U(e.target)?"multiline":"";this.setState({multiline:t,inputText:e.target.value})}},{key:"inputFocus",value:function(){this.setState({isFocused:!0})}},{key:"inputBlur",value:function(){this.setState({isFocused:!1,isSelectingEmoji:!1})}},{key:"renderDoneButton",value:function(){return this.state.inputText?l.a.createElement("div",{className:"input-button-wrapper "+this.state.multiline},l.a.createElement("div",{className:"input-button",onClick:this.submitRetroItem},l.a.createElement("i",{className:"fa fa-check","aria-hidden":"true"}))):null}},{key:"onEmojiButtonClick",value:function(e){e.preventDefault();var t=this.state.isSelectingEmoji;this.setState({isSelectingEmoji:!t}),this.textarea.focus()}},{key:"onEmojiSelect",value:function(e,t){var n=this;e.preventDefault(),this.setState((function(e){var r=e.inputText,a=Object(P.a)(e,["inputText"]),o=n.textarea.selectionStart,i=n.textarea.selectionEnd,c=r.substring(0,o)+t+r.substring(i,r.length);return n.textarea.focus(),Object(A.a)(Object(A.a)({},a),{},{inputText:c,isSelectingEmoji:!1})}))}},{key:"renderEmojiButton",value:function(){var e=this;return l.a.createElement("div",{className:"input-button-wrapper "+this.state.multiline},l.a.createElement("div",{className:"emoji-button",onClick:function(){return e.onEmojiButtonClick.apply(e,arguments)}},l.a.createElement("i",{className:"fa fa-smile-o","aria-hidden":"true"})))}},{key:"renderEmojiSelector",value:function(){var e=this,t=this.state.isSelectingEmoji;return t?l.a.createElement(M,{hidden:!t,onSelect:function(t,n){return e.onEmojiSelect(t,n)}}):null}},{key:"resolveInputBoxClass",value:function(){var e=this.state,t=e.multiline,n=e.isFocused,r=e.isSelectingEmoji,a="input-box "+t;return(n||r)&&(a+=" focused"),r&&(a+=" emoji-selector-focus"),a}},{key:"render",value:function(){var e=this,t=this.props.category;return l.a.createElement("div",{className:"retro-item-list-input"},l.a.createElement("div",{className:this.resolveInputBoxClass()},l.a.createElement(x.a,{type:"text",className:"retro-item-add-input",placeholder:this.resolvePlaceholder(t),onFocus:this.inputFocus,onBlur:this.inputBlur,onChange:this.onChange,value:this.state.inputText,onKeyPress:this.onKeyPress,onResize:this.onResize,required:!0,autoComplete:"off",innerRef:function(t){e.textarea=t}}),l.a.createElement("div",{className:"input-buttons"},this.renderEmojiButton(),this.renderDoneButton())),this.renderEmojiSelector())}}]),n}(l.a.Component),B=n(21),F=n.n(B),H=n(153),W=n.n(H);var Y=function(e){var t=e.secondsRemaining;return l.a.createElement("div",{className:"formatted-interval"},function(e){var t=Math.max(Math.floor(e),0),n=t%60+"";return Math.floor(t/60)+":"+"00".substr(n.length)+n}(t))};var G=function(e){Object(o.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(c.a)(e);if(t()){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).getCurrentTimestampInMs=function(){return Date.now()},a.startTimer=function(){clearInterval(a.state.interval),a.setState({interval:setInterval(a.updateRemainingTime,500),remainingTimeInMs:a.getRemainingTimeInMs()})},a.getRemainingTimeInMs=function(){return Math.max(a.props.endTimestampInMs-a.getCurrentTimestampInMs(),0)},a.updateRemainingTime=function(){var e=a.getRemainingTimeInMs();a.setState({remainingTimeInMs:e}),e<=0&&clearInterval(a.state.interval)},a.state={remainingTimeInMs:0,interval:null},a.onExtendTimerClicked=a.onExtendTimerClicked.bind(Object(d.a)(a)),a}return Object(a.a)(n,[{key:"componentDidMount",value:function(){this.startTimer()}},{key:"componentWillReceiveProps",value:function(){this.startTimer()}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.interval)}},{key:"onExtendTimerClicked",value:function(e){var t=this.props.retroId;this.props.extendTimer(t),e.stopPropagation()}},{key:"renderTimerInformation",value:function(){return this.state.remainingTimeInMs<=0?l.a.createElement("div",null,l.a.createElement("div",{className:"retro-item-timer"},l.a.createElement("div",{className:"retro-item-timer-extend",onClick:this.onExtendTimerClicked},l.a.createElement("span",{className:"item-times-up"},"Time's Up!"),l.a.createElement("br",null),"+2 more minutes"))):l.a.createElement("div",{className:"retro-item-timer"},l.a.createElement("div",{className:"retro-item-timer-clock"},l.a.createElement(Y,{secondsRemaining:this.state.remainingTimeInMs/1e3})))}},{key:"render",value:function(){return l.a.createElement("div",null,this.renderTimerInformation())}}]),n}(l.a.Component);var z=function(e){Object(o.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(c.a)(e);if(t()){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={editedText:"",saveDisabled:""},a.onTextChanged=a.onTextChanged.bind(Object(d.a)(a)),a.onKeyPress=a.onKeyPress.bind(Object(d.a)(a)),a.onDeleteClicked=a.onDeleteClicked.bind(Object(d.a)(a)),a.onSaveClicked=a.onSaveClicked.bind(Object(d.a)(a)),a.onEmojiButtonClicked=a.onEmojiButtonClicked.bind(Object(d.a)(a)),a.onEmojiSelected=a.onEmojiSelected.bind(Object(d.a)(a)),a}return Object(a.a)(n,[{key:"componentDidMount",value:function(){this.setState({editedText:this.props.originalText})}},{key:"onTextChanged",value:function(e){var t=e.target.value;this.setState({editedText:t,saveDisabled:0===t.length?"disabled":""})}},{key:"onSaveClicked",value:function(e){e.stopPropagation();var t=this.state.editedText;t.trim().length>0&&this.props.saveItem(t)}},{key:"onDeleteClicked",value:function(e){e.stopPropagation(),this.props.deleteItem()}},{key:"onEmojiButtonClicked",value:function(){var e=this.state.isSelectingEmoji;this.setState({isSelectingEmoji:!e}),this.textarea.focus()}},{key:"onEmojiSelected",value:function(e,t){var n=this;this.setState((function(e){var r=e.editedText,a=Object(P.a)(e,["editedText"]),o=n.textarea.selectionStart,i=n.textarea.selectionEnd,c=r.substring(0,o)+t+r.substring(i,r.length);return n.textarea.focus(),Object(A.a)(Object(A.a)({},a),{},{editedText:c,isSelectingEmoji:!1})}))}},{key:"onKeyPress",value:function(e){var t=this.state.editedText,n=e.target.value;"Enter"===e.key&&!e.shiftKey&&n&&n.trim().length>0&&this.props.saveItem(t)}},{key:"renderTextInput",value:function(){var e=this;return l.a.createElement("div",{className:"edit-text"},l.a.createElement(x.a,{type:"text",name:"edit-text-field",autoFocus:!0,value:this.state.editedText,onChange:this.onTextChanged,onKeyPress:this.onKeyPress,innerRef:function(t){e.textarea=t}}))}},{key:"renderDeleteButton",value:function(){return l.a.createElement("div",{className:"edit-delete",onClick:this.onDeleteClicked},l.a.createElement("i",{className:"fa fa-trash-o"}),l.a.createElement("span",null,"Delete"))}},{key:"renderSaveButton",value:function(){var e=this.state.saveDisabled;return l.a.createElement("div",{className:"edit-save "+e,onClick:this.onSaveClicked},l.a.createElement("i",{className:"fa fa-check"}),l.a.createElement("span",null,"Save"))}},{key:"renderEmojiButton",value:function(){return l.a.createElement("div",{className:"emoji-button",onClick:this.onEmojiButtonClicked},l.a.createElement("i",{className:"fa fa-smile-o","aria-hidden":"true"}))}},{key:"renderEmojiSelector",value:function(){return this.state.isSelectingEmoji?l.a.createElement(M,{onSelect:this.onEmojiSelected}):null}},{key:"render",value:function(){return l.a.createElement("div",{className:"edit-view"},l.a.createElement("div",{className:"edit-content"},this.renderTextInput()),this.renderEmojiSelector(),l.a.createElement("div",{className:"edit-buttons"},this.renderDeleteButton(),this.renderEmojiButton(),this.renderSaveButton()))}}]),n}(l.a.Component);var J=function(e){Object(o.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(c.a)(e);if(t()){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).domId=function(){return"retro-item-"+a.props.item.id},a.state={isEditing:!1},a.onItemCancelClicked=a.onItemCancelClicked.bind(Object(d.a)(a)),a.onItemDoneClicked=a.onItemDoneClicked.bind(Object(d.a)(a)),a.onItemVoteClicked=a.onItemVoteClicked.bind(Object(d.a)(a)),a.onItemEditClicked=a.onItemEditClicked.bind(Object(d.a)(a)),a.deleteItem=a.deleteItem.bind(Object(d.a)(a)),a.saveRetroItem=a.saveRetroItem.bind(Object(d.a)(a)),a.onItemClicked=a.onItemClicked.bind(Object(d.a)(a)),a}return Object(a.a)(n,[{key:"componentDidUpdate",value:function(e){var t=e.item,n=e.highlighted_item_id,r=n&&n===t.id;if(this.isHighlighted()&&!r){var a=document.body.getBoundingClientRect().height,o=F.a.findDOMNode(this).offsetHeight;this.props.scrollTo(this.domId(),{offset:-(a-o)/2,delay:0,smooth:!document.hidden,duration:300})}}},{key:"isEnabled",value:function(){var e=this.props,t=e.item,n=e.highlighted_item_id;return!n||n===t.id}},{key:"isHighlighted",value:function(){var e=this.props,t=e.item,n=e.highlighted_item_id;return n&&n===t.id}},{key:"isDone",value:function(){return this.props.item.done}},{key:"onItemEditClicked",value:function(e){e.stopPropagation(),this.setState({isEditing:!0})}},{key:"onItemVoteClicked",value:function(e){e.stopPropagation();var t=this.props,n=t.item,r=t.retroId,a=t.archives;this.isDone()||a||this.props.voteRetroItem(r,n)}},{key:"onItemClicked",value:function(){this.toggleHighlight()}},{key:"onItemDoneClicked",value:function(e){e.stopPropagation();var t=this.props,n=t.item,r=t.retroId,a=t.isMobile;this.isEnabled()&&!a&&this.props.doneRetroItem(r,n)}},{key:"onItemCancelClicked",value:function(e){e.stopPropagation();var t=this.props,n=t.item,r=t.retroId,a=t.isMobile;this.isEnabled()&&this.isDone()&&!a?this.props.undoneRetroItem(r,n):this.toggleHighlight()}},{key:"getPrimaryClass",value:function(){var e=this.props,t=e.item,n=e.highlighted_item_id,r=this.state.isEditing;return t.id===n?" highlight":!0===t.done?" discussed":n?" lowlight":r?" editing":""}},{key:"toggleHighlight",value:function(){var e=this.props,t=e.item,n=e.retroId,r=e.isMobile,a=e.archives,o=this.state.isEditing;!this.isEnabled()||r||a||o||(this.isHighlighted()?this.props.unhighlightRetroItem(n):this.props.highlightRetroItem(n,t))}},{key:"saveRetroItem",value:function(e){var t=this.props,n=t.retroId,r=t.item;this.state.isEditing&&e.trim().length>0&&(this.setState({isEditing:!1}),this.props.updateRetroItem(n,r,e))}},{key:"deleteItem",value:function(){var e=this.props,t=e.item,n=e.retroId;this.isEnabled()&&this.props.deleteRetroItem(n,t)}},{key:"renderTimer",value:function(){var e=this.props,t=e.item,n=e.highlighted_item_id,r=e.retro_item_end_time,a=e.retroId;return t.id===n?l.a.createElement(G,{endTimestampInMs:Date.parse(r),retroId:a,extendTimer:this.props.extendTimer}):null}},{key:"renderFooter",value:function(){var e=this.props,t=e.item,n=e.highlighted_item_id;return t.id===n?l.a.createElement("div",{className:"item-footer"},l.a.createElement("br",null),l.a.createElement("div",{className:"retro-item-cancel",onClick:this.onItemCancelClicked},"Cancel"),l.a.createElement("div",{className:"item-done",onClick:this.onItemDoneClicked},"Done")):null}},{key:"renderVote",value:function(){return this.state.isEditing?null:l.a.createElement("div",{className:"item-vote"},l.a.createElement("div",{className:"item-vote-submit",onClick:this.onItemVoteClicked},l.a.createElement("div",{className:"vote-icon"},l.a.createElement("i",{className:"fa fa-heart","aria-hidden":"true"})),l.a.createElement("div",{className:"vote-count"},this.props.item.vote_count)))}},{key:"renderEdit",value:function(){var e=this.props,t=e.item,n=e.archives,r=e.highlighted_item_id,a=this.state.isEditing;return n||a||r||t.done?null:l.a.createElement("div",{className:"item-edit",onClick:this.onItemEditClicked},l.a.createElement("i",{className:"fa fa-pencil"}))}},{key:"renderDescription",value:function(){var e=this.props.item;return l.a.createElement("div",{className:"item-text"},l.a.createElement("button",{type:"button"},e.description))}},{key:"renderDiscussed",value:function(){return l.a.createElement("div",{className:"item-discussed"},l.a.createElement("i",{className:"fa fa-check"}))}},{key:"render",value:function(){var e,t=this.props.item;return e=this.state.isEditing?l.a.createElement(z,{originalText:t.description,deleteItem:this.deleteItem,saveItem:this.saveRetroItem}):l.a.createElement("div",{className:"item-content"},this.renderVote(),this.renderDescription(),this.renderTimer(),this.renderFooter(),this.renderEdit(),this.renderDiscussed()),l.a.createElement("div",{id:this.domId(),key:t.id,className:"retro-item"+this.getPrimaryClass(),onClick:this.onItemClicked},e)}}]),n}(l.a.Component);J.defaultProps={highlighted_item_id:null,retro_item_end_time:"",scrollTo:W.a.scroller.scrollTo.bind(W.a.scroller)};var q=n(232),V=n.n(q),K=n(233),X=n.n(K),Z=n(234),$=n.n(Z);var Q=new Map;Q.set("happy",V.a),Q.set("meh",X.a),Q.set("sad",$.a);var ee=function(e){Object(o.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(c.a)(e);if(t()){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"renderRetroItems",value:function(){var e=this,t=this.props,n=t.archives,r=t.retroId,a=t.retro,o=a.items,i=a.highlighted_item_id,c=a.retro_item_end_time,s=t.category,u=t.isMobile;return o?o.filter((function(e){return e.category===s})).sort((function(e,t){return t.created_at<=e.created_at?-1:1})).map((function(t){return l.a.createElement(J,{key:t.id,retroId:r,item:t,highlighted_item_id:i,retro_item_end_time:c,archives:n,isMobile:u,voteRetroItem:e.props.voteRetroItem,doneRetroItem:e.props.doneRetroItem,undoneRetroItem:e.props.undoneRetroItem,highlightRetroItem:e.props.highlightRetroItem,unhighlightRetroItem:e.props.unhighlightRetroItem,updateRetroItem:e.props.updateRetroItem,deleteRetroItem:e.props.deleteRetroItem,extendTimer:e.props.extendTimer})})):null}},{key:"renderColumnHeader",value:function(){var e=this.props,t=e.category;return e.isMobile?null:l.a.createElement("div",{className:"retro-item-list-header"},l.a.createElement("img",{src:Q.get(t),alt:t}))}},{key:"renderInput",value:function(){var e=this.props,t=e.category,n=e.retroId;return e.archives?null:l.a.createElement(L,{retroId:n,category:t,createRetroItem:this.props.createRetroItem,createRetroActionItem:this.props.createRetroActionItem})}},{key:"render",value:function(){var e=this.props.category;return l.a.createElement("div",{className:"column-"+e},this.renderColumnHeader(),this.renderInput(),this.renderRetroItems())}}]),n}(l.a.Component);ee.defaultProps={archives:!1};var te=n(235),ne=n.n(te),re=n(236),ae=n.n(re);var oe=function(e){Object(o.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(c.a)(e);if(t()){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={isEditing:!1},a.onActionTickClicked=a.onActionTickClicked.bind(Object(d.a)(a)),a.onActionEditClicked=a.onActionEditClicked.bind(Object(d.a)(a)),a.deleteItem=a.deleteItem.bind(Object(d.a)(a)),a.saveActionItem=a.saveActionItem.bind(Object(d.a)(a)),a}return Object(a.a)(n,[{key:"renderTick",value:function(){var e=this.props.action_item.done?l.a.createElement("img",{className:"action-tick-checked",src:ne.a,alt:"Done"}):l.a.createElement("img",{className:"action-tick-unchecked",src:ae.a,alt:"Not done"});return l.a.createElement("div",{className:"action-tick",onClick:this.onActionTickClicked},e)}},{key:"renderEditButton",value:function(){return this.props.archives?null:l.a.createElement("div",{className:"action-edit",onClick:this.onActionEditClicked},l.a.createElement("i",{className:"fa fa-pencil"}))}},{key:"onActionTickClicked",value:function(){var e=this.props,t=e.retroId,n=e.action_item;this.props.doneRetroActionItem(t,n.id,!n.done)}},{key:"onActionEditClicked",value:function(){this.setState({isEditing:!0})}},{key:"deleteItem",value:function(){var e=this.props,t=e.retroId,n=e.action_item;this.props.deleteRetroActionItem(t,n)}},{key:"saveActionItem",value:function(e){var t=this.props,n=t.retroId,r=t.action_item;this.setState({isEditing:!1}),this.props.editRetroActionItem(n,r.id,e)}},{key:"render",value:function(){var e;return e=this.state.isEditing?l.a.createElement(z,{originalText:this.props.action_item.description,deleteItem:this.deleteItem,saveItem:this.saveActionItem}):l.a.createElement("div",{className:"action-content"},this.renderTick(),l.a.createElement("div",{className:"action-text"},this.props.action_item.description),this.renderEditButton()),l.a.createElement("div",{className:"retro-action ".concat(this.state.isEditing?"retro-action-edit":"")},e)}}]),n}(l.a.Component);oe.defaultProps={archives:!1};var ie=["January","February","March","April","May","June","July","August","September","October","November","December"];function ce(e){return new Date(e).getTime()}var se=function(e){Object(o.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(c.a)(e);if(t()){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"renderActionItems",value:function(){var e=this,t=this.props,n=t.category,r=t.archives,a=t.retroId,o=t.retro.action_items,i=this;return o?o.filter((function(e){if(r)return"current"===n;var t=new Date(e.created_at),a=i.getDateOfLatestItemThatIsNotToday();return"current"===n?i.isToday(t):!!a&&("last-week"===n?i.isSameDate(a,t):t<a)})).sort((function(e,t){return ce(t.created_at)-ce(e.created_at)})).map((function(t){return l.a.createElement(oe,{key:t.id,retroId:a,action_item:t,archives:r,doneRetroActionItem:e.props.doneRetroActionItem,deleteRetroActionItem:e.props.deleteRetroActionItem,editRetroActionItem:e.props.editRetroActionItem})})):null}},{key:"isToday",value:function(e){var t=new Date(Date.now());return this.isSameDate(e,t)}},{key:"isSameDate",value:function(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}},{key:"renderCurrentDateString",value:function(){var e=new Date(Date.now());return ie[e.getMonth()]+" "+e.getDate()}},{key:"renderLastWeekDateString",value:function(){var e=this.getDateOfLatestItemThatIsNotToday();return e?ie[e.getMonth()]+" "+e.getDate():""}},{key:"getDateOfLatestItemThatIsNotToday",value:function(){var e=this,t=this.props.retro.action_items,n=(void 0===t?[]:t).filter((function(e){return e.created_at})).map((function(e){return new Date(e.created_at)})).filter((function(t){return!e.isToday(t)})).map((function(e){return e.setHours(0,0,0,0),e.getTime()}));return n.length?new Date(Math.max.apply(Math,Object(C.a)(n))):null}},{key:"renderDate",value:function(){var e=this.props,t=e.category,n=e.archives;return"current"===t?n?"Completed action items":"Today ("+this.renderCurrentDateString()+")":"last-week"===t?this.renderLastWeekDateString():n?"":"Older"}},{key:"render",value:function(){var e=this.props.category;return l.a.createElement("div",{className:"retro-actions-"+e},l.a.createElement("div",{className:"retro-action-list-header"},this.renderDate()),this.renderActionItems())}}]),n}(l.a.Component);se.defaultProps={archives:!1};var le=function(e){Object(o.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(c.a)(e);if(t()){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"renderActionColumnTitle",value:function(){return this.props.isMobile?null:l.a.createElement("h2",null,"Action items")}},{key:"renderInput",value:function(){var e=this.props,t=e.retroId;return e.archives?null:l.a.createElement(L,{retroId:t,category:"action",createRetroItem:this.props.createRetroItem,createRetroActionItem:this.props.createRetroActionItem})}},{key:"render",value:function(){var e=this,t=this.props,n=t.retro,r=t.retroId,a=t.isMobile,o=t.archives,i=["current","last-week","older"].map((function(t){return l.a.createElement(se,{key:t,category:t,retro:n,retroId:r,archives:o,doneRetroActionItem:e.props.doneRetroActionItem,deleteRetroActionItem:e.props.deleteRetroActionItem,editRetroActionItem:e.props.editRetroActionItem})}));return l.a.createElement("div",{className:a?"column-action":"retro-action-panel"},l.a.createElement("div",{className:"retro-action-header"},this.renderActionColumnTitle(),this.renderInput()),l.a.createElement("div",{className:"retro-action-list"},i))}}]),n}(l.a.Component),ue=n(92),de=n.n(ue),me=n(20);var he=function(e){Object(o.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(c.a)(e);if(t()){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={subscription:null},a}return Object(a.a)(n,[{key:"componentWillMount",value:function(){var e=this.props,t=e.cable,n=e.retro_id,r=e.websocketRetroDataReceived;this.initialize(t,n,r)}},{key:"componentWillReceiveProps",value:function(e){var t=e.cable,n=e.retro_id,r=e.websocketRetroDataReceived;this.initialize(t,n,r)}},{key:"componentWillUnmount",value:function(){var e=this.props.cable;e.connection.close({allowReconnect:!1}),e.subscriptions.remove(this.state.subscription)}},{key:"initialize",value:function(e,t,n){var r=this.state.subscription;e&&!r&&this.subscribe(e,t,localStorage.getItem("apiToken-"+t),n)}},{key:"onDisconnected",value:function(e){me.a.info("disconnected from actioncable",e)}},{key:"subscribe",value:function(e,t,n,r){var a=e.subscriptions.create({channel:"RetrosChannel",retro_id:t,api_token:n},{received:r,disconnected:this.onDisconnected});this.setState({subscription:a})}},{key:"render",value:function(){return null}}]),n}(l.a.Component);var fe=function(e){Object(o.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(c.a)(e);if(t()){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={cable:null},a}return Object(a.a)(n,[{key:"componentWillMount",value:function(){var e=this.props.url;this.initialize(e)}},{key:"componentWillReceiveProps",value:function(e){var t=e.url;this.initialize(t)}},{key:"initialize",value:function(e){this.setState((function(t){return{cable:t.cable||de.a.createConsumer(e)}}))}},{key:"render",value:function(){var e=this.state.cable,t=this.props.retro_id;return e?l.a.createElement(he,{cable:e,retro_id:t,websocketRetroDataReceived:this.props.websocketRetroDataReceived}):null}}]),n}(l.a.Component),pe=function(e){var t=e.config,n=t.terms,r=t.privacy,a=e.onDismiss;return l.a.createElement("div",{className:"banner",style:{display:"flex"}},l.a.createElement("div",{className:"terms-text"},"By accessing and using Postfacto, you agree to our"," ",l.a.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer"},"Terms of Use")," and"," ",l.a.createElement("a",{href:r,target:"_blank",rel:"noopener noreferrer"},"Privacy Policy")," and use of cookies"),l.a.createElement("button",{className:"button ok-button",type:"button",onClick:a},"OK"))};function ve(){return JSON.parse(window.localStorage.retroBannersDismissed||"[]")}var ge=function(e){Object(o.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(c.a)(e);if(t()){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}(n);function n(e){var a,o;return Object(r.a)(this,n),(a=t.call(this,e)).onDismiss=function(){!function(e){var t=ve();t.push(e),window.localStorage.retroBannersDismissed=JSON.stringify(t)}(a.props.retroId),a.setState({hasBeenDismissed:!0})},a.state={hasBeenDismissed:(o=e.retroId,ve().includes(o))},a}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.config,n=e.isPrivate;return this.state.hasBeenDismissed||n?null:l.a.createElement(pe,{config:t,onDismiss:this.onDismiss})}}]),n}(l.a.PureComponent);ge.defaultProps={isPrivate:!1};var ye=n(88),be=n.n(ye),Ee=n(64),Re=n.n(Ee);var Oe=function(e){Object(o.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(c.a)(e);if(t()){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={anchorEl:null,open:!1},a.renderMenuItem=a.renderMenuItem.bind(Object(d.a)(a)),a.handleMenuClick=a.handleMenuClick.bind(Object(d.a)(a)),a.handleRequestClose=a.handleRequestClose.bind(Object(d.a)(a)),a}return Object(a.a)(n,[{key:"handleMenuClick",value:function(e){e.preventDefault(),this.setState({open:!0,anchorEl:e.currentTarget})}},{key:"handleRequestClose",value:function(){this.setState({open:!1})}},{key:"onClick",value:function(e){e.callback.call(this),this.handleRequestClose()}},{key:"renderMenuItem",value:function(e){var t,n=this;return t=e.button?l.a.createElement("button",{className:"retro-menu-item retro-menu-item--button",type:"button",onClick:function(){return n.onClick(e)}},e.title):l.a.createElement(Re.a,{className:"retro-menu-item",primaryText:e.title,onClick:function(){return n.onClick(e)}}),l.a.createElement("div",{key:e.title},t)}},{key:"renderMenuItems",value:function(){return this.props.items.map(this.renderMenuItem)}},{key:"render",value:function(){var e=this.props,t=e.isMobile,n=e.items,r=this.state,a=r.anchorEl,o=r.open;return 0===n.length?null:l.a.createElement("div",{className:t?"retro-menu-mobile":"retro-menu"},l.a.createElement(w.c,{className:"retro-heading-button",backgroundColor:"#2574a9",labelColor:"#f8f8f8",onClick:this.handleMenuClick,label:"MENU"}),l.a.createElement(be.a,{anchorEl:a,open:o,animated:!1,anchorOrigin:{horizontal:"right",vertical:"bottom"},targetOrigin:{horizontal:"right",vertical:"top"},onRequestClose:this.handleRequestClose},this.renderMenuItems()))}}]),n}(l.a.Component);var ke=function(e){Object(o.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(c.a)(e);if(t()){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).onArchivesButtonClicked=a.onArchivesButtonClicked.bind(Object(d.a)(a)),a.handleArchiveRetro=a.handleArchiveRetro.bind(Object(d.a)(a)),a.handleShareRetro=a.handleShareRetro.bind(Object(d.a)(a)),a.handleViewArchives=a.handleViewArchives.bind(Object(d.a)(a)),a.handleRetroSettings=a.handleRetroSettings.bind(Object(d.a)(a)),a}return Object(a.a)(n,[{key:"onArchivesButtonClicked",value:function(){var e=this.props.retroId;this.props.routeToRetroArchives(e)}},{key:"renderBackButton",value:function(){var e=this.props,t=e.archives,n=e.isMobile;return t?l.a.createElement("div",{className:"small-2 columns back-button"},l.a.createElement(w.a,{className:"retro-back",onClick:this.onArchivesButtonClicked,label:"Archives",labelStyle:n?{display:"none"}:{},icon:l.a.createElement(w.b,{className:"fa fa-chevron-left"})})):null}},{key:"renderShareButton",value:function(){return this.props.retro.join_token?l.a.createElement(w.c,{className:"retro-heading-button share-button",backgroundColor:"#2574a9",labelColor:"#f8f8f8",label:"SHARE",onClick:this.handleShareRetro}):null}},{key:"handleArchiveRetro",value:function(){this.props.showDialog({title:"You're about to archive this retro.",message:"Are you sure?",type:"ARCHIVE_RETRO"})}},{key:"handleShareRetro",value:function(){this.props.viewedMagicLink(this.props.retroId),this.props.showDialog({type:"SHARE_RETRO"})}},{key:"handleViewArchives",value:function(){var e=this.props.retroId;this.props.routeToRetroArchives(e)}},{key:"handleRetroSettings",value:function(){var e=this.props.retroId;null!==window.localStorage.getItem("apiToken-".concat(e))?this.props.routeToRetroSettings(e):this.props.requireRetroLogin(e)}},{key:"getMenuItems",value:function(){var e=this.props,t=e.archives,n=e.retro;return[{title:"Archive this retro",callback:this.handleArchiveRetro,isApplicable:!t&&n.items&&n.items.length>0,button:!0},{title:"View archives",callback:this.handleViewArchives,isApplicable:!t&&n.archives&&n.archives.length>0},{title:"Retro settings",callback:this.handleRetroSettings,isApplicable:!0},{title:"Sign out",callback:this.props.signOut,isApplicable:window.localStorage.length>0}].filter((function(e){return e.isApplicable}))}},{key:"render",value:function(){var e=this.props,t=e.retro,n=e.isMobile;return l.a.createElement("div",{className:"retro-heading"},this.renderBackButton(),l.a.createElement("span",{className:"retro-heading-content"},l.a.createElement("div",{className:"retro-name"},l.a.createElement("h1",null,t.name)),l.a.createElement("div",{className:"retro-heading-buttons"},this.renderShareButton(),t.video_link?l.a.createElement(w.c,{className:"retro-heading-button video-button",backgroundColor:"#2574a9",labelColor:"#f8f8f8",href:t.video_link,target:"_blank",label:"VIDEO"}):null,l.a.createElement(Oe,{isMobile:n,items:this.getMenuItems()}))))}}]),n}(l.a.Component);function Ie(){return l.a.createElement("div",null)}var we=n(75),je=n(45),_e=n.n(je);var Se=function(e){Object(o.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(c.a)(e);if(t()){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).handleArchiveEmailPreferenceChange=a.handleArchiveEmailPreferenceChange.bind(Object(d.a)(a)),a.handleArchiveRetroConfirmation=a.handleArchiveRetroConfirmation.bind(Object(d.a)(a)),a}return Object(a.a)(n,[{key:"handleArchiveEmailPreferenceChange",value:function(){this.props.toggleSendArchiveEmail(!this.props.retro.send_archive_email)}},{key:"handleArchiveRetroConfirmation",value:function(){this.props.archiveRetro(this.props.retro),this.props.onClose()}},{key:"render",value:function(){var e=p,t=l.a.createElement("button",{className:"archive-dialog__actions--archive",type:"button",onClick:this.handleArchiveRetroConfirmation},this.props.retro.send_archive_email&&this.props.featureFlags.archiveEmails?"Archive & send email":"Archive"),n=l.a.createElement("button",{className:"archive-dialog__actions--cancel",type:"button",onClick:this.props.onClose},"Cancel");return l.a.createElement(_e.a,{title:this.props.title,actions:[n,t],open:!0,onRequestClose:this.props.onClose,actionsContainerClassName:"archive-dialog__actions",contentClassName:"archive-dialog"},l.a.createElement("p",null,this.props.message),this.props.featureFlags.archiveEmails?l.a.createElement("div",null,l.a.createElement("label",{className:"label",htmlFor:"send_archive_email"},"Send action items to the team via email?"),l.a.createElement(h.a,{id:"send_archive_email",name:"sendArchiveEmail",label:this.props.retro.send_archive_email?"Yes":"No",toggled:this.props.retro.send_archive_email,labelPosition:"right",onToggle:this.handleArchiveEmailPreferenceChange,trackStyle:e.trackStyle,trackSwitchedStyle:e.trackSwitchedStyle,labelStyle:e.labelStyle,thumbStyle:e.thumbStyle,thumbSwitchedStyle:e.thumbSwitchedStyle,iconStyle:e.iconStyle})):null)}}]),n}(l.a.Component);var Te=function(e){Object(o.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(c.a)(e);if(t()){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).retroUrl="".concat(window.location.origin,"/retros/").concat(a.props.retroId,"/join/").concat(a.props.retro.join_token),a.copyRetroUrl=a.copyRetroUrl.bind(Object(d.a)(a)),a}return Object(a.a)(n,[{key:"copyRetroUrl",value:function(){var e=document.querySelector("#share-retro-url");e.select(),e.setSelectionRange(0,99999),document.execCommand("copy"),this.props.copiedMagicLink(this.props.retroId)}},{key:"render",value:function(){var e=l.a.createElement("button",{className:"share-dialog__actions--close",type:"button",onClick:this.props.onClose},"Close");return l.a.createElement(_e.a,{title:"Invite others to this retro",actions:[e],open:!0,onRequestClose:this.props.onClose,actionsContainerClassName:"share-dialog__actions",contentClassName:"share-dialog"},"Copy this link and send it to your team mates",l.a.createElement("div",{className:"share-retro-url-wrapper"},l.a.createElement("input",{name:"share-retro-url",readOnly:!0,id:"share-retro-url",type:"text",value:this.retroUrl}),l.a.createElement("div",{className:"share-retro-url-copy",onClick:this.copyRetroUrl},l.a.createElement("i",{className:"fa fa-copy"}))))}}]),n}(l.a.Component),Ce=n(29);function Ne(e){return e.archived_at?new Date(e.archived_at).getTime():null}var Ae=function(e){Object(o.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(c.a)(e);if(t()){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={currentMobileCategory:"happy",filtered_retro_archive:{}},a.handleArchiveRetroConfirmation=a.handleArchiveRetroConfirmation.bind(Object(d.a)(a)),a.handleArchiveEmailPreferenceChange=a.handleArchiveEmailPreferenceChange.bind(Object(d.a)(a)),a.moveToNextItem=a.moveToNextItem.bind(Object(d.a)(a)),a}return Object(a.a)(n,[{key:"componentWillMount",value:function(){var e=this.props,t=e.retroId,n=e.archiveId,r=e.retro_archives,a=e.archives;this.fetchRetros(t,a,n),this.initializeArchivesState(r,a)}},{key:"componentWillReceiveProps",value:function(e){var t=e.retroId,n=e.archiveId,r=e.retro_archives,a=e.archives;a!==this.props.archives&&this.fetchRetros(t,a,n),this.initializeArchivesState(r,a)}},{key:"fetchRetros",value:function(e,t,n){t?this.props.getRetroArchive(e,n):this.props.getRetro(e)}},{key:"initializeArchivesState",value:function(e,t){t&&this.setState({filtered_retro_archive:this.filterRetroArchives(e)})}},{key:"filterRetroArchives",value:function(e){var t=e.items,n=void 0===t?[]:t,r=e.action_items,a=void 0===r?[]:r,o=[].concat(Object(C.a)(n),Object(C.a)(a)).map(Ne).filter((function(e){return null!==e}));if(0===o.length)return e;var i=Math.max.apply(Math,Object(C.a)(o));return Object.assign({},e,{items:this.filterItemByTimestamp(n,i),action_items:this.filterItemByTimestamp(a,i)})}},{key:"filterItemByTimestamp",value:function(e,t){return e.filter((function(e){return Ne(e)===t}))}},{key:"moveToNextItem",value:function(e){if("textarea"!==e.target.type){var t=this.props.retro;this.props.nextRetroItem(t)}}},{key:"onMobileTabClick",value:function(e){this.setState({currentMobileCategory:e})}},{key:"handleArchiveRetroConfirmation",value:function(){this.props.archiveRetro(this.props.retro),this.props.hideDialog()}},{key:"handleArchiveEmailPreferenceChange",value:function(){this.props.toggleSendArchiveEmail(!this.props.retro.send_archive_email)}},{key:"renderColumnMobile",value:function(e){var t=this.props,n=t.archives,r=t.retroId,a=this.state.currentMobileCategory;return"action"===a?l.a.createElement(le,{retro:e,retroId:r,isMobile:!0,archives:n,createRetroItem:this.props.createRetroItem,createRetroActionItem:this.props.createRetroActionItem,doneRetroActionItem:this.props.doneRetroActionItem,deleteRetroActionItem:this.props.deleteRetroActionItem,editRetroActionItem:this.props.editRetroActionItem}):l.a.createElement(ee,{category:a,retro:e,retroId:r,archives:n,isMobile:!0,voteRetroItem:this.props.voteRetroItem,doneRetroItem:this.props.doneRetroItem,undoneRetroItem:this.props.undoneRetroItem,highlightRetroItem:this.props.highlightRetroItem,unhighlightRetroItem:this.props.unhighlightRetroItem,updateRetroItem:this.props.updateRetroItem,deleteRetroItem:this.props.deleteRetroItem,createRetroItem:this.props.createRetroItem,createRetroActionItem:this.props.createRetroActionItem,extendTimer:this.props.extendTimer})}},{key:"renderDialog",value:function(){switch(this.props.dialog?this.props.dialog.type:""){case"ARCHIVE_RETRO":return l.a.createElement(Se,{title:this.props.dialog.title,message:this.props.dialog.message,retro:this.props.retro,featureFlags:this.props.featureFlags,toggleSendArchiveEmail:this.props.toggleSendArchiveEmail,archiveRetro:this.props.archiveRetro,onClose:this.props.hideDialog});case"SHARE_RETRO":return l.a.createElement(Te,{retro:this.props.retro,retroId:this.props.retroId,onClose:this.props.hideDialog,copiedMagicLink:this.props.copiedMagicLink});default:return null}}},{key:"renderMobile",value:function(e){var t=this,n=this.props,r=n.config,a=n.retroId,o=n.archives;return l.a.createElement("span",null,l.a.createElement(fe,{url:Object(we.a)(r),retro_id:a,websocketRetroDataReceived:this.props.websocketRetroDataReceived}),this.renderDialog(),l.a.createElement("div",{className:o?"mobile-display archived":"mobile-display"},l.a.createElement(ge,{retroId:a,isPrivate:e.is_private,config:r}),l.a.createElement(ke,{retro:e,retroId:a,isMobile:!0,archives:o,routeToRetroArchives:this.props.routeToRetroArchives,routeToRetroSettings:this.props.routeToRetroSettings,requireRetroLogin:this.props.requireRetroLogin,showDialog:this.props.showDialog,signOut:this.props.signOut,viewedMagicLink:this.props.viewedMagicLink}),l.a.createElement("div",{className:"mobile-tabs"},l.a.createElement("div",{className:"mobile-tabs-list"},l.a.createElement("div",{className:"mobile-tab-happy",onClick:function(){return t.onMobileTabClick("happy")}},"Happy"),l.a.createElement("div",{className:"mobile-tab-meh",onClick:function(){return t.onMobileTabClick("meh")}},"Meh"),l.a.createElement("div",{className:"mobile-tab-sad",onClick:function(){return t.onMobileTabClick("sad")}},"Sad"),l.a.createElement("div",{className:"mobile-tab-action",onClick:function(){return t.onMobileTabClick("action")}},"Action"))),this.renderColumnMobile(e),l.a.createElement(j,{config:r})))}},{key:"renderDesktop",value:function(e){var t=this.props,n=t.config,r=t.retroId,a=t.archives,o="full-height full-height-retro";a&&(o+=" archived");var i={next:this.moveToNextItem};return l.a.createElement(N.HotKeys,{keyMap:{next:"right"},handlers:i},l.a.createElement("span",null,l.a.createElement(fe,{url:Object(we.a)(n),retro_id:r,websocketRetroDataReceived:this.props.websocketRetroDataReceived}),this.renderDialog(),l.a.createElement("div",{className:o},l.a.createElement(ge,{retroId:r,isPrivate:e.is_private,config:n}),l.a.createElement(ke,{retro:e,retroId:r,isMobile:!1,archives:a,routeToRetroArchives:this.props.routeToRetroArchives,routeToRetroSettings:this.props.routeToRetroSettings,requireRetroLogin:this.props.requireRetroLogin,showDialog:this.props.showDialog,signOut:this.props.signOut,viewedMagicLink:this.props.viewedMagicLink}),l.a.createElement("div",{className:"retro-item-list"},l.a.createElement(ee,{category:"happy",retro:e,retroId:r,archives:a,isMobile:!1,voteRetroItem:this.props.voteRetroItem,doneRetroItem:this.props.doneRetroItem,undoneRetroItem:this.props.undoneRetroItem,highlightRetroItem:this.props.highlightRetroItem,unhighlightRetroItem:this.props.unhighlightRetroItem,updateRetroItem:this.props.updateRetroItem,deleteRetroItem:this.props.deleteRetroItem,createRetroItem:this.props.createRetroItem,createRetroActionItem:this.props.createRetroActionItem,extendTimer:this.props.extendTimer}),l.a.createElement(ee,{category:"meh",retro:e,retroId:r,archives:a,isMobile:!1,voteRetroItem:this.props.voteRetroItem,doneRetroItem:this.props.doneRetroItem,undoneRetroItem:this.props.undoneRetroItem,highlightRetroItem:this.props.highlightRetroItem,unhighlightRetroItem:this.props.unhighlightRetroItem,updateRetroItem:this.props.updateRetroItem,deleteRetroItem:this.props.deleteRetroItem,createRetroItem:this.props.createRetroItem,createRetroActionItem:this.props.createRetroActionItem,extendTimer:this.props.extendTimer}),l.a.createElement(ee,{category:"sad",retro:e,retroId:r,archives:a,isMobile:!1,voteRetroItem:this.props.voteRetroItem,doneRetroItem:this.props.doneRetroItem,undoneRetroItem:this.props.undoneRetroItem,highlightRetroItem:this.props.highlightRetroItem,unhighlightRetroItem:this.props.unhighlightRetroItem,updateRetroItem:this.props.updateRetroItem,deleteRetroItem:this.props.deleteRetroItem,createRetroItem:this.props.createRetroItem,createRetroActionItem:this.props.createRetroActionItem,extendTimer:this.props.extendTimer})),l.a.createElement(le,{retro:e,retroId:r,isMobile:!1,archives:a,createRetroItem:this.props.createRetroItem,createRetroActionItem:this.props.createRetroActionItem,doneRetroActionItem:this.props.doneRetroActionItem,deleteRetroActionItem:this.props.deleteRetroActionItem,editRetroActionItem:this.props.editRetroActionItem}),l.a.createElement(j,{config:n}))))}},{key:"render",value:function(){var e=this.props,t=e.retro,n=e.archives,r=e.environment,a=this.state.filtered_retro_archive,o=n?a:t;return o&&o.id?r.isMobile640?this.renderMobile(o):this.renderDesktop(o):l.a.createElement(Ie,null)}}]),n}(l.a.Component);Ae.defaultProps={retro_archives:null,archiveId:null,dialog:null};var Pe=Object(u.b)((function(e){return{retro:e.retro.currentRetro,retro_archives:e.retro.currentArchivedRetro,dialog:e.messages.dialog,featureFlags:e.config.featureFlags,environment:e.config.environment}}),(function(e){return{getRetroArchive:function(t,n){return e(Object(E.m)(t,n))},getRetro:function(t){return e(Object(E.l)(t))},nextRetroItem:function(t){return e(Object(E.t)(t))},archiveRetro:function(t){return e(Object(E.a)(t))},hideDialog:function(){return e(Object(O.b)())},toggleSendArchiveEmail:function(t){return e(Object(O.j)(t))},routeToRetroArchives:function(t){return e(Object(R.e)(t))},routeToRetroSettings:function(t){return e(Object(R.i)(t))},requireRetroLogin:function(t){return e(Object(R.f)(t))},showDialog:function(t){return e(Object(O.r)(t))},signOut:function(){return e(Object(O.s)())},voteRetroItem:function(t,n){return e(Object(E.B)(t,n))},doneRetroItem:function(t,n){return e(Object(E.i)(t,n))},undoneRetroItem:function(t,n){return e(Object(E.w)(t,n))},highlightRetroItem:function(t,n){return e(Object(E.q)(t,n))},unhighlightRetroItem:function(t){return e(Object(E.x)(t))},updateRetroItem:function(t,n,r){return e(Object(E.y)(t,n,r))},deleteRetroItem:function(t,n){return e(Object(E.g)(t,n))},createRetroActionItem:function(t,n){return e(Object(E.b)(t,n))},createRetroItem:function(t,n,r){return e(Object(E.c)(t,n,r))},doneRetroActionItem:function(t,n,r){return e(Object(E.h)(t,n,r))},deleteRetroActionItem:function(t,n){return e(Object(E.f)(t,n))},editRetroActionItem:function(t,n,r){return e(Object(E.j)(t,n,r))},viewedMagicLink:function(t){return e(Object(Ce.i)(t))},copiedMagicLink:function(t){return e(Object(Ce.c)(t))},extendTimer:function(t){return e(Object(E.k)(t))},websocketRetroDataReceived:function(t){"force_relogin"===t.command?e(Object(O.m)(t.payload.originator_id,t.payload.retro.slug)):e(Object(O.k)(t.retro))}}}))(Ae),De=n(35),xe=n.n(De),Me=n(36),Ue=n.n(Me);function Le(e,t){var n={};return e&&(n.name=e.name,n.slug=e.slug,n.isPrivate=e.is_private,n.video_link=e.video_link,n.isMagicLinkEnabled=null!==e.join_token),n.errors=t?{name:t.name,slug:t.slug}:{},n}var Be=function(e){Object(o.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(c.a)(e);if(t()){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}(n);function n(e){var a;Object(r.a)(this,n),(a=t.call(this,e)).togglePrivate=function(){a.setState((function(e){return{isPrivate:!e.isPrivate}}))},a.toggleMagicLinkEnabled=function(){a.setState((function(e){return{isMagicLinkEnabled:!e.isMagicLinkEnabled}}))};var o=e.retro,i=e.errors;return a.state=Object.assign({isPrivate:!1,name:"",slug:"",video_link:"",isMagicLinkEnabled:!1,errors:{}},Le(o,i)),a.handleBackButtonClicked=a.handleBackButtonClicked.bind(Object(d.a)(a)),a.onChangeName=a.onChange.bind(Object(d.a)(a),"name"),a.onChangeSlug=a.onChange.bind(Object(d.a)(a),"slug"),a.onChangeVideo=a.onChange.bind(Object(d.a)(a),"video_link"),a.handleChangePasswordClick=a.handleChangePasswordClick.bind(Object(d.a)(a)),a.togglePrivate=a.togglePrivate.bind(Object(d.a)(a)),a.handleRetroSettingsSubmit=a.handleRetroSettingsSubmit.bind(Object(d.a)(a)),a}return Object(a.a)(n,[{key:"componentWillMount",value:function(){this.getSettings(this.props)}},{key:"componentWillReceiveProps",value:function(e){var t=e.retro,n=e.errors;this.setState(Le(t,n))}},{key:"componentWillUnmount",value:function(){this.props.clearErrors()}},{key:"handleBackButtonClicked",value:function(){var e=this.props.retroId;this.props.showRetroForId(e)}},{key:"validateName",value:function(e){return e?"":"Your project needs a name!"}},{key:"validateSlug",value:function(e){return e?e.length>236?"Your URL is too long!":e.match(f)?"":"Your URL should only contain letters, numbers or hyphens!":"Your project needs a URL!"}},{key:"onChange",value:function(e,t){var n=t.target.value,r={};"name"===e&&(r.name=this.validateName(n)),"slug"===e&&(r.slug=this.validateSlug(n)),this.setState((function(t){return{[e]:n,errors:Object.assign({},t.errors,r)}}))}},{key:"handleRetroSettingsSubmit",value:function(){var e=this.props,t=e.retroId,n=e.retro,r=e.session,a=this.state,o=a.name,i=a.slug,c=a.isPrivate,s=a.video_link,l=a.isMagicLinkEnabled,u={name:this.validateName(o),slug:this.validateSlug(i)};u.name||u.slug?this.setState({errors:u}):this.props.updateRetroSettings(t,o,i,n.slug,c,r.request_uuid,s,l)}},{key:"handleChangePasswordClick",value:function(e){e.preventDefault(),this.props.routeToRetroPasswordSettings(this.props.retroId)}},{key:"getSettings",value:function(e){var t=e.retroId;this.props.getRetroSettings(t)}},{key:"renderBackButton",value:function(){var e=this.props.environment.isMobile640;return l.a.createElement(xe.a,{className:"retro-back",onClick:this.handleBackButtonClicked,label:"Back",labelStyle:e?{display:"none"}:{},icon:l.a.createElement(Ue.a,{className:"fa fa-chevron-left"})})}},{key:"renderAccessInstruction",value:function(){var e=l.a.createElement("div",null,l.a.createElement("img",{className:"icon-locked",src:g.a,alt:"Locked"})," ","The password is needed to view or participate."),t=l.a.createElement("div",null,l.a.createElement("img",{className:"icon-locked",src:b.a,alt:"Unlocked"})," ","Anyone can view or participate ",l.a.createElement("strong",null,"without")," entering password.");return l.a.createElement("div",{className:"access-instruction"},this.state.isPrivate?e:t,l.a.createElement("br",null),"Password is always required to: ",l.a.createElement("br",null),l.a.createElement("img",{className:"icon-locked",src:g.a,alt:"Locked"})," Access archives",l.a.createElement("br",null),l.a.createElement("img",{className:"icon-locked",src:g.a,alt:"Locked"})," Edit settings")}},{key:"getMenuItems",value:function(){return[{title:"Sign out",callback:this.props.signOut,isApplicable:window.localStorage.length>0}].filter((function(e){return e.isApplicable}))}},{key:"getCurrentHost",value:function(){return window.location.origin.split("://")[1]}},{key:"render",value:function(){var e=this.props,t=e.retro,n=e.retroId,r=e.environment.isMobile640,a=this.state.errors,o=p,i=r?"full-height mobile-display":"full-height";return t&&t.id?l.a.createElement("span",{className:"retro-settings-page"},l.a.createElement("div",{className:i},l.a.createElement("div",{className:"retro-heading row"},l.a.createElement("div",{className:"small-2 columns back-button"},this.renderBackButton()),l.a.createElement("h1",{className:"small-8 text-center retro-name"},t.name),l.a.createElement("div",{className:"small-2 menu end"},l.a.createElement(Oe,{isMobile:!1,items:this.getMenuItems()}))),l.a.createElement("div",null,l.a.createElement("div",{className:"retro-settings large-12 medium-12 columns"},l.a.createElement("div",{className:"medium-8 small-12 columns"},l.a.createElement("div",{className:"row"},l.a.createElement("h1",{className:"retro-settings-header"},"Settings")),l.a.createElement("div",{className:"row"},l.a.createElement("label",{className:"label"},"Project name"),l.a.createElement("input",{id:"retro_name",value:this.state.name,type:"text",name:"name",className:"form-input ".concat(a.name?"input-error":""),onChange:this.onChangeName,placeholder:""}),l.a.createElement("div",{className:"error-message"},a.name)),l.a.createElement("div",{className:"row"},l.a.createElement("label",{className:"label"},"Project URL"),l.a.createElement("div",{className:"input-group retro-url"},l.a.createElement("span",{className:"input-group-label retro-url-prefix"},this.getCurrentHost(),"/retros/"),l.a.createElement("input",{id:"retro_url",value:this.state.slug,type:"text",name:"slug",className:"input-group-field form-input ".concat(a.slug?"input-error":""),onChange:this.onChangeSlug,placeholder:""})),l.a.createElement("div",{className:"error-message"},a.slug)),l.a.createElement("div",{className:"row"},l.a.createElement("label",{className:"label"},"Video URL"),l.a.createElement("input",{id:"retro_video_link",name:"video_link",value:this.state.video_link,type:"text",onChange:this.onChangeVideo,className:"form-input",placeholder:""})),l.a.createElement("div",{className:"row",onClick:this.handleChangePasswordClick},l.a.createElement("a",{id:"retro-password-settings",href:"/retros/".concat(n,"/settings/password")},"Change password")),l.a.createElement("div",{className:"row"},l.a.createElement("label",{className:"label",htmlFor:"retro_is_private"},"Do people need the password to ",l.a.createElement("strong",null,"access")," this retro?"),l.a.createElement(h.a,{id:"retro_is_private",name:"isPrivate",label:this.state.isPrivate?"Yes":"No",toggled:this.state.isPrivate,labelPosition:"right",onToggle:this.togglePrivate,trackStyle:o.trackStyle,trackSwitchedStyle:o.trackSwitchedStyle,labelStyle:o.labelStyle,thumbStyle:o.thumbStyle,thumbSwitchedStyle:o.thumbSwitchedStyle,iconStyle:o.iconStyle}),this.renderAccessInstruction()),l.a.createElement("div",{className:"row"},l.a.createElement("label",{className:"label",htmlFor:"retro_is_magic_link_enabled"},"Can participants share this retro using a magic link?"),l.a.createElement(h.a,{id:"retro_is_magic_link_enabled",name:"isMagicLinkEnabled",label:this.state.isMagicLinkEnabled?"Yes":"No",toggled:this.state.isMagicLinkEnabled,labelPosition:"right",onToggle:this.toggleMagicLinkEnabled,trackStyle:o.trackStyle,trackSwitchedStyle:o.trackSwitchedStyle,labelStyle:o.labelStyle,thumbStyle:o.thumbStyle,thumbSwitchedStyle:o.thumbSwitchedStyle,iconStyle:o.iconStyle}),l.a.createElement("div",{className:"access-instruction"},"This will provide a magic link that allows users to access this retro without being prompted for a password. This is not the same as making a retro public.")),l.a.createElement("div",{className:"row"},l.a.createElement("button",{className:"retro-settings-form-submit button",type:"submit",onClick:this.handleRetroSettingsSubmit},"Save changes"))))))):l.a.createElement(Ie,null)}}]),n}(l.a.Component);Be.defaultProps={errors:null,retro:null,session:null};var Fe=Object(u.b)((function(e){return{retro:e.retro.currentRetro,errors:e.messages.errors,session:e.user.websocketSession,environment:e.config.environment}}),(function(e){return{clearErrors:function(){return e(Object(O.c)())},showRetroForId:function(t){return e(Object(R.k)(t))},updateRetroSettings:function(t,n,r,a,o,i,c,s){return e(Object(E.A)(t,n,r,a,o,i,c,s))},routeToRetroPasswordSettings:function(t){return e(Object(R.g)(t))},getRetroSettings:function(t){return e(Object(E.p)(t))},signOut:function(){return e(Object(O.s)())}}}))(Be);var He=function(e){Object(o.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(c.a)(e);if(t()){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={current_password:"",confirm_new_password:"",new_password:"",errors:{confirm_new_password:"",current_password:""}},a.handleBackButtonClicked=a.handleBackButtonClicked.bind(Object(d.a)(a)),a.onCurrentPasswordChange=a.onChange.bind(Object(d.a)(a),"current_password"),a.onNewPasswordChange=a.onChange.bind(Object(d.a)(a),"new_password"),a.onConfirmPasswordChange=a.onChange.bind(Object(d.a)(a),"confirm_new_password"),a.handleSubmitButtonClicked=a.handleSubmitButtonClicked.bind(Object(d.a)(a)),a}return Object(a.a)(n,[{key:"componentWillMount",value:function(){var e=this.props.retroId;this.props.getRetroSettings(e)}},{key:"componentWillReceiveProps",value:function(e){e.errors?this.setState({errors:{current_password:e.errors.current_password}}):this.setState({errors:{}})}},{key:"componentWillUnmount",value:function(){this.props.clearErrors()}},{key:"handleBackButtonClicked",value:function(){var e=this.props.retroId;this.props.showRetroForId(e)}},{key:"handleSubmitButtonClicked",value:function(){var e={};this.state.new_password!==this.state.confirm_new_password?e.confirm_new_password="Your passwords do not match!":(e.confirm_new_password="",this.props.updateRetroPassword(this.props.retroId,this.state.current_password,this.state.new_password,this.props.session.request_uuid)),this.setState((function(t){return{errors:Object.assign({},t.errors,e)}}))}},{key:"onChange",value:function(e,t){var n=t.target.value;this.setState({[e]:n})}},{key:"renderBackButton",value:function(){var e=this.props.environment.isMobile640;return l.a.createElement(xe.a,{className:"retro-back",onClick:this.handleBackButtonClicked,label:"Back",labelStyle:e?{display:"none"}:{},icon:l.a.createElement(Ue.a,{className:"fa fa-chevron-left"})})}},{key:"getMenuItems",value:function(){return[{title:"Sign out",callback:this.props.signOut,isApplicable:window.localStorage.length>0}].filter((function(e){return e.isApplicable}))}},{key:"render",value:function(){var e=this.props,t=e.retro,n=e.environment.isMobile640,r=this.state.errors,a=n?"full-height mobile-display":"full-height";return t&&t.id?l.a.createElement("span",{className:"retro-settings-page"},l.a.createElement("div",{className:a},l.a.createElement("div",{className:"retro-heading row"},l.a.createElement("div",{className:"small-2 columns back-button"},this.renderBackButton()),l.a.createElement("h1",{className:"small-8 text-center retro-name"},t.name),l.a.createElement("div",{className:"small-2 menu end"},l.a.createElement(Oe,{isMobile:!1,items:this.getMenuItems()}))),l.a.createElement("div",null,l.a.createElement("div",{className:"retro-settings large-12 medium-12 columns"},l.a.createElement("div",{className:"medium-8 small-12 columns"},l.a.createElement("div",{className:"row"},l.a.createElement("h1",{className:"retro-settings-header"},"Change password")),l.a.createElement("div",{className:"row"},l.a.createElement("label",{className:"label"},"Current password"),l.a.createElement("input",{id:"retro_current_password",type:"password",name:"current_password",onChange:this.onCurrentPasswordChange,className:"form-input ".concat(r.current_password?"input-error":""),placeholder:"Current password"}),l.a.createElement("div",{className:"error-message"},r.current_password),l.a.createElement("label",{className:"label"},"New password"),l.a.createElement("input",{id:"retro_new_password",type:"password",name:"new_password",onChange:this.onNewPasswordChange,placeholder:"New password"}),l.a.createElement("label",{className:"label"},"Confirm new password"),l.a.createElement("input",{id:"retro_confirm_new_password",type:"password",name:"confirm_new_password",onChange:this.onConfirmPasswordChange,className:"form-input ".concat(r.confirm_new_password?"input-error":""),placeholder:"New password again"}),l.a.createElement("div",{className:"error-message"},r.confirm_new_password)),l.a.createElement("div",{className:"row reminder"},l.a.createElement("em",null,"Remember to let your team know the new password",this.props.retro.join_token?" and magic link":"","!")),l.a.createElement("div",{className:"row actions"},l.a.createElement("button",{type:"submit",className:"retro-settings-form-submit button",style:{fontSize:"1.1rem"},onClick:this.handleSubmitButtonClicked},"Save new password"))))))):l.a.createElement(Ie,null)}}]),n}(l.a.Component);He.defaultProps={retro:null,session:null,errors:null};var We=Object(u.b)((function(e){return{retro:e.retro.currentRetro,errors:e.messages.errors,session:e.user.websocketSession,environment:e.config.environment}}),(function(e){return{getRetroSettings:function(t){return e(Object(E.p)(t))},clearErrors:function(){return e(Object(O.c)())},showRetroForId:function(t){return e(Object(R.k)(t))},updateRetroPassword:function(t,n,r,a){return e(Object(E.z)(t,n,r,a))},signOut:function(){return e(Object(O.s)())}}}))(He);var Ye=function(e){Object(o.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(c.a)(e);if(t()){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={password:"",errors:[],inputStyle:""},a.onInputFocus=a.onInputFocus.bind(Object(d.a)(a)),a.onInputChange=a.onInputChange.bind(Object(d.a)(a)),a.onKeyPress=a.onKeyPress.bind(Object(d.a)(a)),a.onLoginClicked=a.onLoginClicked.bind(Object(d.a)(a)),a}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.retroId;e&&this.props.getRetroLogin(e)}},{key:"componentWillReceiveProps",value:function(e){var t=e.errors.login_error_message;this.setState({errors:[t],inputStyle:t?"input-error":""})}},{key:"onInputChange",value:function(e){this.setState({password:e.target.value})}},{key:"onInputFocus",value:function(){this.setState({errors:[],inputStyle:""})}},{key:"onLoginClicked",value:function(){this.loginToRetro()}},{key:"onKeyPress",value:function(e){"Enter"===e.key&&e.target.value&&this.loginToRetro()}},{key:"loginToRetro",value:function(){var e=this.props.retroId;this.props.loginToRetro(e,this.state.password),this.setState({password:""})}},{key:"pageTitle",value:function(){return this.props.force_relogin?"The owner of this retro has chosen to protect it with a password.":"Psst... what's the password?"}},{key:"render",value:function(){var e=this.props,t=e.retro.name,n=e.config,r=this.state,a=r.errors,o=r.inputStyle;return t?l.a.createElement("div",{className:"password-page"},l.a.createElement("div",{className:"row",style:{marginTop:"180px"}},l.a.createElement("div",{className:"small-centered medium-8 small-10 columns"},l.a.createElement("div",{className:"field row"},l.a.createElement("h1",null,this.pageTitle()),l.a.createElement("label",{className:"label"},"Enter the password to access ",t,"."),l.a.createElement("input",{className:"form-input ".concat(o),placeholder:"Password",type:"password",value:this.state.password,onFocus:this.onInputFocus,onChange:this.onInputChange,onKeyPress:this.onKeyPress,required:!0,autoFocus:!0,autoComplete:"off"}),l.a.createElement("p",{className:"password-terms-text"},"By logging in, you agree to our"," ",l.a.createElement("a",{href:n.terms,target:"_blank"},"Terms of Use")," and"," ",l.a.createElement("a",{href:n.privacy,target:"_blank"},"Privacy Policy")," and use of cookies."),l.a.createElement("div",{className:"error-message"},a)),l.a.createElement("div",{className:"actions row"},l.a.createElement("button",{type:"submit",className:"retro-form-submit expanded button",style:{fontSize:"1.1rem"},onClick:this.onLoginClicked},"Login"))))):null}}]),n}(l.a.Component);Ye.defaultProps={errors:{login_error_message:""},force_relogin:!1};var Ge=Object(u.b)((function(e){return{errors:e.messages.errors,retro:e.retro.currentRetro}}),(function(e){return{getRetroLogin:function(t){return e(Object(E.o)(t))},loginToRetro:function(t,n){return e(Object(E.s)(t,n))}}}))(Ye),ze=n(237),Je=n.n(ze);var qe=function(e){Object(o.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(c.a)(e);if(t()){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"componentWillUnmount",value:function(){this.props.resetApiServerNotFound()}},{key:"render",value:function(){return l.a.createElement("div",{className:"error-page"},l.a.createElement("div",{className:"row",style:{marginTop:"180px"}},l.a.createElement("div",{className:"small-centered medium-8 small-10 columns"},l.a.createElement("div",{className:"image"},l.a.createElement("img",{src:Je.a,alt:"Error"})),l.a.createElement("h1",null,"Oh no! It's broken"),l.a.createElement("p",null,"Try refreshing the page, or come back later."))))}}]),n}(l.a.PureComponent),Ve=Object(u.b)(null,(function(e){return{resetApiServerNotFound:function(){return e(Object(O.p)({api_server_not_found:!1}))}}}))(qe);var Ke=function(e){Object(o.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(c.a)(e);if(t()){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).onCreateNewRetroClicked=function(){e.props.redirectToRetroCreatePage()},e}return Object(a.a)(n,[{key:"componentWillUnmount",value:function(){this.props.resetRetroNotFound()}},{key:"render",value:function(){return l.a.createElement("div",{className:"error-page"},l.a.createElement("div",{className:"row",style:{marginTop:"180px"}},l.a.createElement("div",{className:"small-centered medium-8 small-10 columns"},l.a.createElement("h1",null,"Project not found."),l.a.createElement("p",null,"Unfortunately, we couldn't find that project. If you've created a project already, double-check your URL."),l.a.createElement("p",null,"If you haven't created a project, why don't you create one?"),l.a.createElement("div",{className:"row"},l.a.createElement("button",{className:"retro-form-submit expanded button",type:"button",style:{fontSize:"1.1rem"},onClick:this.onCreateNewRetroClicked},"Create a Project")))))}}]),n}(l.a.Component),Xe=Object(u.b)(null,(function(e){return{resetRetroNotFound:function(){return e(Object(O.p)({retro_not_found:!1}))},redirectToRetroCreatePage:function(){return e(Object(R.b)())}}}))(Ke);var Ze=function(e){Object(o.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(c.a)(e);if(t()){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).onCreateNewRetroClicked=function(){e.props.navigateNewRetro()},e}return Object(a.a)(n,[{key:"componentWillUnmount",value:function(){this.props.resetNotFound()}},{key:"render",value:function(){return l.a.createElement("div",{className:"error-page"},l.a.createElement("div",{className:"row",style:{marginTop:"180px"}},l.a.createElement("div",{className:"small-centered medium-8 small-10 columns"},l.a.createElement("h1",null,"Oops... Looks like the page you're looking for doesn't exist."),l.a.createElement("p",null,"Perhaps you were trying to do this?"),l.a.createElement("div",{className:"row"},l.a.createElement("button",{className:"retro-form-submit expanded button",type:"button",style:{fontSize:"1.1rem"},onClick:this.onCreateNewRetroClicked},"Create a Project")))))}}]),n}(l.a.PureComponent),$e=Object(u.b)(null,(function(e){return{resetNotFound:function(){return e(Object(O.p)({not_found:!1}))},navigateNewRetro:function(){return e(Object(R.b)())}}}))(Ze),Qe=function(e){var t=e.config;return l.a.createElement("div",{id:"new-terms",className:"terms"},l.a.createElement("div",{className:"simple-text-page"},l.a.createElement("h1",null,"Postfacto Services Agreement"),l.a.createElement("ol",{start:"1"},l.a.createElement("li",null,'Postfacto is the retrospective management tool operated by Pivotal Software, Inc. if you are accessing the Service Offering from the United States or Mexico, or Pivotal Software International if you are accessing from outside the USA and Mexico ("',l.a.createElement("strong",null,"Pivotal"),'" ). By using or accessing any of the services offered at ',l.a.createElement("a",{href:"https://postfacto.io",target:"_blank"},"https://postfacto.io"),'\xa0 ("',l.a.createElement("strong",null,"Service Offering(s)"),'"), you agree to be bound by the terms of use between you and Pivotal (the "',l.a.createElement("strong",null,"Postfacto Agreement"),'" ) and the ',l.a.createElement("strong",null,"Terms of Use"),"\xa0posted at ",l.a.createElement("a",{href:"https://pivotal.io/terms-of-use",target:"_blank"},"https://pivotal.io/terms-of-use"),', as may be updated by Pivotal from time to time\xa0 ("',l.a.createElement("strong",null,"Terms of Use"),'"), which are incorporated herein by reference. Unless otherwise indicated, capitalized terms have the meaning stated in the Terms of Use. If You do not agree to this Postfacto Agreement, you must not use or access the Service Offering. If you are accepting this Postfacto Agreement on behalf of an Organization (and not for you as individual), you represent and warrant that you have legal authority to bind that Organization, and you hereby enter into this Postfacto Agreement on behalf of that Organization.\xa0"You" or "your" means the entity accepting this Postfacto Agreement and the individual accepting this Postfacto Agreement on behalf of the entity.'),l.a.createElement("li",null,l.a.createElement("h2",null,"Definitions"),l.a.createElement("ol",null,l.a.createElement("li",null,'"',l.a.createElement("strong",null,"Confidential Information"),'" means information, software and materials provided by Pivotal to you, including software, information and materials of third parties, which are in tangible form and labeled " confidential" or the like, or, information which a reasonable person knew or should have known to be confidential. The following information shall be considered our Confidential Information whether or not marked or identified as such: login credentials, software, technical information and documentation relating to the Service Offerings that is not otherwise made generally available to the public by Pivotal.'),l.a.createElement("li",null,l.a.createElement("strong",null,'"Content"'),"\xa0means any and all applications, files, information, data, software, or other content uploaded to, published or displayed through the Service Offerings."),l.a.createElement("li",null,'"',l.a.createElement("strong",null,"Login Credentials"),'" mean any passwords, API tokens or other security credentials that enable your access to the Service Offering.'),l.a.createElement("li",null,'"',l.a.createElement("strong",null,"Organization"),'" means the entity that is accepting this Postfacto Agreement.'),l.a.createElement("li",null,'"',l.a.createElement("strong",null,"Retro"),'" means a place to organize and collaborate around information in the form of retro items and action items. Depending on retro access settings, users can view and participate in a retro with or without entering a password.'),l.a.createElement("li",null,'"',l.a.createElement("strong",null,"Retro Owner"),'" means a specific person, identified by their UserID, that has administrative rights to a Retro.'),l.a.createElement("li",null,l.a.createElement("strong",null,'"Retro Participant"'),"\xa0means a specific person that has been given access to view and participate in a Retro via a URL."),l.a.createElement("li",null,'"',l.a.createElement("strong",null,"Relationship Data"),'" means personal information that we collect during the registration, activation and maintenance of your user profile and/or account. It may include without limitation names and contact details of Your personnel involved in using the Service Offering. Relationship Data does not include information collected through the publicly accessible portions of our webpages, which is subject to the Privacy Policy\xa0 posted at ',l.a.createElement("a",{href:"https://pivotal.io/privacy-policy",target:"_blank"},"https://pivotal.io/privacy-policy"),"."),l.a.createElement("li",null,'"',l.a.createElement("strong",null,"Services Description(s)"),'" means any description of or information about the Service Offerings made available to you through this site or any usage or access instructions that we provide to you and which we may modify from time to time.'),l.a.createElement("li",null,'"',l.a.createElement("strong",null,"Subscription Term"),'" means the one year time period during which you are provided access to the Service Offerings, which starts on the date you sign up for the Service Offering.'),l.a.createElement("li",null,'"',l.a.createElement("strong",null,"Third Party Content"),'" means third party data, Content, services, or applications, including open source software.'),l.a.createElement("li",null,'"',l.a.createElement("strong",null,"Third Party Terms"),'" means the then-current version of the third-party terms applicable to any Third Party Content.'),l.a.createElement("li",null,'"',l.a.createElement("strong",null,"Usage Data"),'" means information regarding Your use of the Service Offerings, such as application activity, as well as collaborator and retro counts.'),l.a.createElement("li",null,'"',l.a.createElement("strong",null,"User"),'" means an Organization or individual that subscribes to the Service Offering.'),l.a.createElement("li",null,'"',l.a.createElement("strong",null,"UserID"),'" means the email by which you identify your User Profile.'),l.a.createElement("li",null,'"',l.a.createElement("strong",null,"User Profile"),'" means the your profile information including full name, email and other Login Credentials, provided to us by you and updated by you periodically.'),l.a.createElement("li",null,'"',l.a.createElement("strong",null,"Your Content"),'" means any Content published or displayed through the Service Offerings by you, or your authorized users (or otherwise through your account). Your Content includes Relationship Data, but does not include Usage Data.'))),l.a.createElement("li",null,l.a.createElement("h2",null,"The Service Offerings"),l.a.createElement("ol",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Generally"),"\xa0. All access to, and use of, any Service Offerings are subject to the terms and conditions of this Postfacto Agreement. We may deliver the Service Offering to you with the assistance of our affiliates, licensors and service providers. You will comply with all laws, rules and regulations applicable to your use of the Service Offering, Third Party Terms, and the Service Descriptions."),l.a.createElement("li",null,l.a.createElement("strong",null,"Access to the Service Offering."),"\xa0You may access and use the Service Offering for solely your own benefit (or the benefit of your Organization). In order to create a retro, You must register for the Service Offering and set up an authorized User Profile. You shall keep your Login Credentials confidential, User Profile accurate, complete and current as long as you continue to use the Service Offering. You may not share Login Credentials with other users. You are responsible for any use that occurs under your Login Credentials. If you believe an unauthorized user has gained access to your Login Credentials, you shall notify us immediately. Neither we nor our affiliates are responsible for any unauthorized access to or use of your account. In order to view and participate in a retro, You do not need a User Profile. You are responsible for managing access settings to the retros you create."),l.a.createElement("li",null,l.a.createElement("strong",null,"Beta Features."),'\xa0We may make certain features or functionality within the Service Offering available to you on a beta basis. We provide these beta features and functions on an " AS-IS" basis without indemnification or support and disclaim all warranties of any kind (including warranties of merchantability, fitness for a particular purposes, and non-infringement), express or implied. Any beta features or functionality made available to you for evaluation do not constitute an implied commitment to offer to you or anyone such features and functionality as part of the Service Offering on a generally available basis.'),l.a.createElement("li",null,l.a.createElement("strong",null,"Relationship Data."),"\xa0We may collect Relationship Data. You agree that we may use and disclose Relationship Data to manage your account, send you notifications, deliver services or information, improve and develop new products and services, monitor compliance and provide support. We may further use and share Relationship Data to provide the Service Offering to you, including sharing with our affiliates as described above and entities who provide payment processing and other services to us necessary to enable us to support the Service Offering, and as required by applicable law."),l.a.createElement("li",null,l.a.createElement("strong",null,"Usage Data."),'\xa0We may generate, collect, store and use Usage Data for any purpose. You agree that, as between you and Pivotal, Pivotal owns all such Usage Data. By way of example, we use Usage Data to track and manage our infrastructure, network storage, and software for billing, capacity planning and other product forecasting, improvement and development purposes. We may further share Usage Data with our affiliates and third party providers to fulfill our contractual obligations such as software license consumption and reporting. You agree that we may use, analyze, and otherwise perform any operations on or in connection with Relationship Data, Usage Data and Your Content to provide the services to which you have subscribed under this Postfacto Agreement. Without limiting the foregoing, unless prohibited by applicable law, we may aggregate Usage Data such that it is not reasonably identifiable with or to the customer to which it relates ("',l.a.createElement("strong",null,"Aggregate Data"),'" ). We may use and disclose Aggregate Data for any purpose.'),l.a.createElement("li",null,l.a.createElement("strong",null,"Disclosure of Data and Your Content."),"\xa0You agree that Pivotal may disclose Your Content, Relationship Data and Usage Data in the following circumstances:",l.a.createElement("ol",null,l.a.createElement("li",null,"to our affiliates and other entities of the Pivotal group of companies worldwide for the purposes set forth in this Postfacto Agreement;"),l.a.createElement("li",null,"to Pivotal\u2019s third-party service providers worldwide who provide services such as website hosting, data analysis, payment processing, order fulfillment, information technology and related infrastructure provision, customer service, email delivery, credit card processing, auditing and other similar services;"),l.a.createElement("li",null,"to a third party in the event of any reorganization, merger, sale, joint venture, assignment, transfer or other disposition of all or any portion of Pivotal\u2019 s business, assets or stock (including in connection with any bankruptcy or similar proceedings); and"),l.a.createElement("li",null,"as Pivotal believes to be necessary or appropriate:",l.a.createElement("ol",null,l.a.createElement("li",null,"under applicable law, including laws outside your country of residence; "),l.a.createElement("li",null,"to comply with legal process;"),l.a.createElement("li",null,"to respond to requests from public and government authorities including public and government authorities outside your country of residence;"),l.a.createElement("li",null,"to enforce this Postfacto Agreement;"),l.a.createElement("li",null,"to protect Pivotal\u2019s operations or those of any of its affiliates; "),l.a.createElement("li",null,"to protect Pivotal\u2019s rights, privacy, safety or property, and/or that of Pivotal\u2019s affiliates, You or others; and"),l.a.createElement("li",null,"to allow Pivotal to pursue available remedies or limit the damages that Pivotal may sustain."))))),l.a.createElement("li",null,'In case of transfer of your personal data as defined by applicable data privacy laws to outside of the European Economic Area ("',l.a.createElement("strong",null,"EEA"),'" ) or access of such data from outside the EEA we will apply reasonable legal protection. Such protection may for example include the implementation of European Commission ("',l.a.createElement("strong",null,"EU"),'" ) Standard Contractual Clauses as published by the EU Commission or our membership to Safe Harbor, an agreement between the U.S. Department of Commerce and the EU Commission for transfers from the EEA to the United States.'))),l.a.createElement("li",null,l.a.createElement("h2",null,"Your Content"),l.a.createElement("ol",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Access to Your Content."),"\xa0You are solely responsible for your Content. We are only acting as a passive conduit for the online distribution and publication of your Content. The Service Offering performs operations on, and distributes, your Content. You and your authorized users retain all of your respective rights, title and interest in and to your Content. Our rights to access and use your Content are limited to those expressly granted in this Postfacto Agreement. No other rights with respect to your Content are implied. In terms of applicable data privacy laws we are acting as a data processor on your (the data controller\u2019 s) behalf regarding your content to the extent it constitutes personal data as per the applicable privacy laws."),l.a.createElement("li",null,l.a.createElement("strong",null,"Security."),'\xa0You are responsible for protecting the security of your Content, including any access you might provide to your Content by your employees, customers or other third parties. You will properly configure and use the Service Offering so that it is suitable for your use. You will protect the privacy of any of your users\u2019 data (including by implementation of a privacy policy that complies with applicable law), provide any necessary notices to your users, and obtain any legally-required consents from your users concerning your use of the Service Offering. You are responsible for complying with any laws or regulations that might apply to the your Content and you understand that the Service Offering is not intended for data regulated by the Health Insurance Portability and Accountability Act ("',l.a.createElement("strong",null,"HIPAA"),'" ). You are responsible for any consequences if your Content is inadvertently exposed or lost and you have not encrypted, backed up or otherwise taken steps required by the relevant laws or regulations to protect your Content. Pivotal will use commercially reasonable efforts to notify you of any inadvertent exposure or loss, taking into account any applicable law, regulation, or governmental request.'),l.a.createElement("li",null,l.a.createElement("strong",null,"Transfer of Your Content."),"\xa0You consent that we may store your Content in the United States or any other country in which we have a data center in our discretion. By uploading your Content into the Service Offering, you may transfer and access your Content from around the world, including to and from the United States. To the extent you provide your Content in connection with customer support, you consent that we may handle your Content in any country in which we or our agents maintain facilities. It is your responsibility to ensure that you comply with applicable law when you transfer data across geographies."))),l.a.createElement("li",null,l.a.createElement("h2",null,"Acceptable Use"),l.a.createElement("ol",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Content Restrictions."),"\xa0You will not, and you will take steps to ensure that your authorized users and third party users who access any service you provide with the Service Offering do not, post Content that:",l.a.createElement("ol",null,l.a.createElement("li",null,"may create a risk of harm, loss, physical or mental injury, emotional distress, death, disability, disfigurement, or physical or mental illness to an authorized user, or any other person or entity;"),l.a.createElement("li",null,"may create a risk of any other loss or damage to any person or property;"),l.a.createElement("li",null,"may constitute or contribute to a crime or tort;"),l.a.createElement("li",null,"contains any information or content that is unlawful, harmful, abusive, racially or ethnically offensive, defamatory, infringing, invasive of personal privacy or publicity rights, harassing, humiliating to other people (publicly or otherwise), libelous, threatening, or otherwise objectionable;"),l.a.createElement("li",null,"contains any information or content that is illegal; or "),l.a.createElement("li",null,"contains any information or content that you do not have a right to make available under any law or under contractual or fiduciary relationships."))),l.a.createElement("li",null,"You represent and warrant that the Content does not and will not violate third-party rights of any kind, including without limitation any Intellectual Property Rights, and rights of publicity and privacy. You shall ensure that your use of the Service Offering complies at all times with your privacy policies and all applicable local, state, federal and international laws and regulations, including any encryption requirements."),l.a.createElement("li",null,l.a.createElement("strong",null,"Violations of Acceptable Use."),"\xa0If You become aware that any of your Content or your user\u2019 s use of your Content violates this Postfacto Agreement, you shall immediately suspend or remove the applicable Content or suspend the end user\u2019 s access. If you fail to do so, we may ask you to do so. If you fail to comply with our request, we may suspend your account or disable the applicable Content until you comply with our request."))),l.a.createElement("li",null,l.a.createElement("h2",null,"Ownership of Service Offering and Rights to Feedback."),l.a.createElement("ol",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Ownership of Service Offering. "),"We and our licensors own and retain all right, title and interest in and to the Service Offering, including all improvements, enhancements, modifications and derivative works thereof, and all Intellectual Property Rights therein. This includes any information that we collect and analyze in connection with the Service Offering, such as usage patterns, user feedback and other information to improve and evolve our products and services offerings. Your rights to use the Service Offering are limited to those expressly granted in this Postfacto Agreement. No other rights with respect to the Service Offering or any related Intellectual Property Rights are implied."),l.a.createElement("li",null,l.a.createElement("strong",null,"Feedback"),'. If you provide comments, suggestions or other feedback to us regarding the Service Offering or Pivotal\u2019 s technology or business (the "',l.a.createElement("strong",null,"Feedback"),'"), you agree that we will be free to use any Feedback You provide for any purpose. You hereby grant to us a non-exclusive, perpetual, irrevocable, royalty-free, transferable, worldwide right and license, with the right to grant and authorize sublicenses, to use, reproduce, perform, display, disclose, distribute, modify, prepare derivative works of and otherwise use the Feedback without restriction in any manner now known or in the future conceived and to make, use, sell, offer to sell, import and export any product or service that incorporates or is based in whole or in part on the Feedback.'))),l.a.createElement("li",null,l.a.createElement("h2",null,"Suspension"),l.a.createElement("ol",null,l.a.createElement("li",null,l.a.createElement("strong",null,"General"),l.a.createElement("ol",null,l.a.createElement("li",null,"you or your use of the Service Offering is in breach of this Postfacto Agreement, including violation of Acceptable Use requirements;"),l.a.createElement("li",null,"you fail to address our request to take action as specified in Sections 3, 4 or 5;"),l.a.createElement("li",null,"your use of the Service Offering poses a security risk to the Service Offering or other users of the Service Offering, or interferes with, disrupts, damages, or accesses in an unauthorized manner the servers, networks, or other properties or services of any third party including, but not limited to, Pivotal or any mobile communications carrier; or"),l.a.createElement("li",null,"suspension is required pursuant to our receipt of a subpoena or other request by a law enforcement agency."))))),l.a.createElement("li",null,l.a.createElement("h2",null,"Term and Termination"),l.a.createElement("ol",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Term."),"\xa0This Postfacto Agreement will commence at the point you first access the Service Offering and will be effective through the Subscription Term, unless terminated earlier as permitted under the Postfacto Agreement."),l.a.createElement("li",null,l.a.createElement("strong",null,"Termination"),l.a.createElement("ol",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Termination for Cause."),"\xa0We may terminate this Postfacto Agreement effective immediately if: (a) we determine, in our sole discretion, that any of the provisions of this Postfacto Agreement; (b) you breach a provision of this Postfacto Agreement that is not capable of being cured; (c) you breach any provision of this Postfacto Agreement that is capable of being cured and do not cure the breach within thirty (30) days after receiving an email identifying the breach from us; or (d) any payment is delinquent by thirty (30) days from the due date."),l.a.createElement("li",null,l.a.createElement("strong",null,"Termination for Insolvency."),"\xa0We may terminate this Postfacto Agreement effective immediately upon sending you an email notification of termination if you: (a) terminate or suspend your business; (b) become insolvent, admit in writing your inability to pay your debts as they mature, make an assignment for the benefit of creditors; (c) become subject to control of a trustee, receiver or similar authority; or (d) become subject to any bankruptcy or insolvency proceeding."),l.a.createElement("li",null,l.a.createElement("strong",null,"Termination for Convenience."),"\xa0We may terminate this Postacto Agreement at any time. You may terminate this Postfacto Agreement at any time by deleting Your user profile by email request to ",l.a.createElement("a",{href:"mailto:postfacto@pivotal.io"},"postfacto@pivotal.io"),"."),l.a.createElement("li",null,l.a.createElement("strong",null,"Effect of Termination."),"\xa0Upon the termination of this Postfacto Agreement for any reason: (a) all rights granted to you under this Postfacto Agreement, including your ability to access any of Your Content stored in the Service Offering, will immediately terminate; and (b) you must promptly discontinue all access or use of the Service Offering and delete or destroy any of our Confidential Information. For a period of thirty (30) days following the termination, we will not delete your Content as a result of this termination, although you will cease to have access to the Service Offering or Your Content during this period. Free/Open Source Software, Relationship Data, Usage Data, Disclosure of Data and your Content, your Content, Acceptable Use, IP Ownership, Payment and Taxes, Term and Termination, Confidential Information, and Country-Specific Terms, will survive the termination of this Postfacto Agreement."))))),l.a.createElement("li",null,l.a.createElement("h2",null,"General"),l.a.createElement("ol",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Successors and Assigns"),".This Postfacto\xa0Agreement may not be assigned without the express written consent of the other party, not to be unreasonably withheld, conditioned or delayed, except that Pivotal may assign or transfer this Postfacto Agreement, in whole or in part, without your consent to any successors-in-interest to all or substantially all of the business or assets of Pivotal whether by merger, reorganization, asset sale or otherwise, or to any subsidiaries or affiliates of Pivotal. Any purported transfer or assignment in violation of this section is void. Subject to the foregoing restrictions, the terms and conditions of this Postfacto Agreement shall inure to the benefit of and be binding upon the respective permitted successors and assigns of the parties."),l.a.createElement("li",null,l.a.createElement("strong",null,"Compliance with Laws; Export Control; Government Regulations"),'. Each party shall comply with all laws applicable to the actions contemplated by this Postfacto Agreement. You acknowledge that the Service Offering and all software and technical information relating thereto is of United States origin, is provided subject to the U.S. Export Administration Regulations, may be subject to the export control laws of the applicable territory, and that diversion contrary to applicable export control laws is prohibited. You represent that: (a) you are not, and are not acting on behalf of (i) any person who is a citizen, national, or resident of, or who is controlled by the government of any country to which the United States has prohibited export transactions, or (ii) any person or entity listed on the U.S. Treasury Department list of Specially Designated Nationals and Blocked Persons, or the U.S. Commerce Department Denied Persons List or Entity List; and (b) you will not permit the Service Offering to be used for, any purposes prohibited by law, including, any prohibited development, design, manufacture or production of missiles or nuclear, chemical or biological weapons. If any software or related documentation is licensed to the United States government or any agency thereof, then the such software and documentation will be deemed to be " commercial computer software"\x9d and "commercial computer software documentation," respectively, pursuant to DFARS Section 227.7202 and FAR Section 12.212, as applicable. Any use, reproduction, release, performance, display or disclosure of the software and any related documentation by the U.S. Government will be governed solely by this Postfacto Agreement and is prohibited except to the extent expressly permitted by this Postfacto Agreement.'),l.a.createElement("li",null,l.a.createElement("strong",null,"Modifications"),". We may change periodically the Service Offering, the terms of your access to the Service Offerings, this Postfacto Agreement, or the Service Description. It is your responsibility to regularly check the Service Offering for updates. We will notify you of any material detrimental change to the Service Offering or Postfacto Agreement by sending you an email or by posting a notice of the modification on the Service Offering. The modified Postfacto Agreement or Service Description, as applicable will become effective as of the date stated in that notification. If we make a material change that is detrimental to You to the Service Offerings (other than the termination or modification of any beta feature or functionality), this Postfacto Agreement, the Service Description, or the Support Policy, you may terminate this Postfacto Agreement on notice to us within ten (10) days of the change or within ten (10) days of our modification notice; in that event, the termination will be effective as of the date we receive your notification. Your continued use of the Service Offering after the effective date of any modification to the Postfacto Agreement, the Service Description, the Third Party Terms, or the Support Policy shall be deemed acceptance of the applicable modification.")))),l.a.createElement("p",null,"These Terms were last updated on September 1, 2017.")),l.a.createElement(j,{config:t}))},et=n(238),tt=n.n(et);var nt=function(e){Object(o.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(c.a)(e);if(t()){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).onMockLogin=function(t){t.stopPropagation();var n=e.props.onSuccess,r=window.mock_google_auth;n({profileObj:{email:r.split("_")[1]+"@example.com",name:"my full name"},accessToken:r})},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.config,n=e.onSuccess,r=e.onFailure,a=e.className;return t.google_oauth_client_id||t.mock_google_auth?l.a.createElement("div",{onClickCapture:t.mock_google_auth?this.onMockLogin:null},l.a.createElement(tt.a,{clientId:t.google_oauth_client_id,onSuccess:n,onFailure:r,className:"button start-retro "+a,hostedDomain:t.google_oauth_hosted_domain},l.a.createElement("span",null,l.a.createElement("i",{className:"fa fa-google","aria-hidden":"true",style:{marginRight:"10px"}}),"Sign in with Google"))):null}}]),n}(l.a.PureComponent);var rt=function(e){Object(o.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(c.a)(e);if(t()){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).onDismiss=function(){window.localStorage.homeTermsDismissed=!0,a.setState({hasBeenDismissed:!0})},a.state={hasBeenDismissed:window.localStorage.homeTermsDismissed},a}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props.config;return this.state.hasBeenDismissed?null:l.a.createElement(pe,{config:e,onDismiss:this.onDismiss})}}]),n}(l.a.PureComponent);var at=function(e){Object(o.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(c.a)(e);if(t()){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).onSignIn=a.onSignIn.bind(Object(d.a)(a)),a}return Object(a.a)(n,[{key:"componentDidMount",value:function(){this.props.homePageShownAnalytics()}},{key:"onSignIn",value:function(e){me.a.info("onGoogleSignIn "+e.profileObj.email),this.props.createSession(e.accessToken,e.profileObj.email,e.profileObj.name)}},{key:"onGoogleLoginFailure",value:function(){me.a.info("onGoogleLoginFailure")}},{key:"render",value:function(){var e=this.props.config;return l.a.createElement("div",{className:"home-page"},l.a.createElement("div",{className:"sticky-header"},l.a.createElement("div",{className:"row"},l.a.createElement(rt,{config:e})),l.a.createElement("div",{className:"row header-title"},l.a.createElement("div",{className:"show-for-medium small-12 columns"},l.a.createElement("span",{className:"title"},"postfacto"),l.a.createElement("span",{className:"subtitle"},"A retro app for successful teams.")),l.a.createElement("div",{className:"hide-for-medium small-12 columns text-center"},l.a.createElement("span",{className:"title small-12 columns"},"postfacto"),l.a.createElement("span",{className:"subtitle"},"A retro app for successful teams.")))),l.a.createElement("div",{className:"panel"},l.a.createElement("div",{className:"row",style:{paddingTop:"77px"}},l.a.createElement("div",{className:"text-block columns"},l.a.createElement("h2",null,"Postfacto helps you run better retrospectives."))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"text-center"},l.a.createElement(nt,{onSuccess:this.onSignIn,onFailure:this.onGoogleLoginFailure,className:"top-start-retro",config:e}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"text-center whats-a-retro-link"},l.a.createElement("a",{href:"https://builttoadapt.io/how-to-run-a-really-good-retrospective-8982bd839e16",target:"_blank"},"What's a retro?")))),l.a.createElement(j,{config:e}))}}]),n}(l.a.PureComponent),ot=Object(u.b)(null,(function(e){return{homePageShownAnalytics:function(){return e(Object(Ce.g)())},createSession:function(t,n,r){return e(Object(E.d)(t,n,r))}}}))(at);var it=function(e,t){return new Date(t.created_at).getTime()-new Date(e.created_at).getTime()},ct=function(e){Object(o.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(c.a)(e);if(t()){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).onCurrentRetroClicked=function(){var t=e.props.retroId;e.props.showRetroForId(t)},e}return Object(a.a)(n,[{key:"componentWillMount",value:function(){var e=this.props.retroId;this.props.getRetroArchives(e)}},{key:"onArchiveClicked",value:function(e,t){t.preventDefault();var n=this.props.retroId;this.props.routeToRetroArchive(n,e)}},{key:"getMenuItems",value:function(){return[{title:"Sign out",callback:this.props.signOut,isApplicable:window.localStorage.length>0}].filter((function(e){return e.isApplicable}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.archives,r=t.retroId,a=t.config,o=t.environment;if(!n)return l.a.createElement("div",null,"Loading archives...");var i=o.isMobile1030,c=this.getMenuItems();return l.a.createElement("div",{className:"retro-archives full-height"+(i?" mobile-display":"")},l.a.createElement("div",{className:"retro-heading row"},l.a.createElement("div",{className:"small-2 columns back-button"},l.a.createElement(xe.a,{className:"retro-back",onClick:this.onCurrentRetroClicked,label:"Current retro",labelStyle:i?{display:"none"}:{},icon:l.a.createElement(Ue.a,{className:"fa fa-chevron-left"})})),l.a.createElement("h1",{className:"small-8 text-center retro-name"},"Archives"),l.a.createElement("div",{className:"small-2 menu end"},l.a.createElement(Oe,{isMobile:!1,items:c}))),l.a.createElement("div",{className:"archives"},l.a.createElement("div",{className:"row"},n.sort(it).map((function(t){return l.a.createElement("div",{className:"archive-row medium-6 medium-offset-3 columns end text-center",key:t.id},l.a.createElement("div",{className:"archive-link",onClick:function(n){return e.onArchiveClicked(t.id,n)}},l.a.createElement("a",{href:"/retros/".concat(r,"/archives/").concat(t.id)},function(e){var t=e.getFullYear(),n=e.toLocaleDateString("en",{day:"2-digit"}),r=e.toLocaleDateString("en",{month:"long"});return"".concat(n," ").concat(r," ").concat(t)}(new Date(t.created_at)))))})))),l.a.createElement(j,{config:a}))}}]),n}(l.a.Component);ct.defaultProps={archives:null};var st=Object(u.b)((function(e){return{archives:e.retro.retroArchives,environment:e.config.environment}}),(function(e){return{getRetroArchives:function(t){return e(Object(E.n)(t))},routeToRetroArchive:function(t,n){return e(Object(R.d)(t,n))},showRetroForId:function(t){return e(Object(R.k)(t))},signOut:function(){return e(Object(O.s)())}}}))(ct),lt=function(e){var t=e.alert,n=e.className;return t&&t.message?l.a.createElement("div",{className:"alert ".concat(n)},t.checkIcon?l.a.createElement("i",{className:"alert__icon fa fa-check"}):null,l.a.createElement("span",{className:"alert__text"},t.message)):null};lt.defaultProps={alert:null,className:""};var ut=lt;var dt=function(e){Object(o.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(c.a)(e);if(t()){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).handleNameChange=function(e){a.setState({fullName:e.target.value})},a.handleCompanyNameChange=function(e){a.setState({companyName:e.target.value})},a.register=function(){var e=a.props.accessToken,t=a.state,n=t.fullName,r=t.companyName;a.props.createUser(e,r,n)},a.state={fullName:e.fullName,companyName:""},a}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props.email,t=this.state,n=t.fullName,r=t.companyName;return l.a.createElement("div",{className:"registration-page"},l.a.createElement("div",{className:"medium-6 small-12 columns registration-side-banner new-retro-column"},l.a.createElement("div",{className:"medium-centered small-centered"},l.a.createElement("p",null,"Welcome to Postfacto!"),l.a.createElement("h1",null,"Let\u2019s create an account for you!"))),l.a.createElement("div",{className:"medium-6 small-12 columns new-retro-column"},l.a.createElement("div",{className:"medium-centered small-centered",style:{width:"30rem"}},l.a.createElement("div",{className:"row"},l.a.createElement("label",{className:"label"},"Email"),l.a.createElement("input",{value:e,placeholder:"Email",id:"email",name:"email",type:"email",className:"form-input",disabled:"true"})),l.a.createElement("div",{className:"row"},l.a.createElement("label",{className:"label"},"Full Name"),l.a.createElement("input",{value:n,onChange:this.handleNameChange,placeholder:"Full Name",id:"fullName",name:"fullName",type:"text",className:"form-input"})),l.a.createElement("div",{className:"row"},l.a.createElement("label",{className:"label"},"Company Name"),l.a.createElement("input",{value:r,onChange:this.handleCompanyNameChange,placeholder:"Company Name",id:"companyName",name:"companyName",type:"text",className:"form-input"})),l.a.createElement("div",{className:"row terms-text"},l.a.createElement("p",null,"By continuing, you agree to Postfacto's"," ",l.a.createElement("a",{href:"/terms",target:"_blank"},"Terms of Use")," and"," ",l.a.createElement("a",{href:"/privacy",target:"_blank"},"Privacy Policy"))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"medium-6 small-12 columns",style:{paddingLeft:"0",paddingRight:"0"}},l.a.createElement("input",{type:"submit",className:"retro-form-submit expanded button",id:"create_new_retro",value:"Next: Make a retro",onClick:this.register}))))))}}]),n}(l.a.Component),mt=Object(u.b)(null,(function(e){return{createUser:function(t,n,r){return e(Object(E.e)(t,n,r))}}}))(dt);var ht=function(e){Object(o.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(c.a)(e);if(t()){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).showRetro=function(e){var t=e.params.retroId;"new"!==t?a.setPage(Pe,{retroId:t,archives:!1}):a.setPage(I)},a.joinRetro=function(e){var t=e.params,n=t.retroId,r=t.joinToken;a.props.joinRetro(n,r)},a.listRetros=function(){a.setPage(T)},a.listRetroArchives=function(e){var t=e.params.retroId;a.setPage(st,{retroId:t})},a.showRetroArchive=function(e){var t=e.params,n=t.retroId,r=t.archiveId;a.setPage(Pe,{retroId:n,archives:!0,archiveId:r})},a.showRetroSettings=function(e){var t=e.params.retroId;a.setPage(Fe,{retroId:t})},a.showRetroPasswordSettings=function(e){var t=e.params.retroId;a.setPage(We,{retroId:t})},a.showNotFound=function(){a.setPage($e)},a.showTerms=function(){a.setPage(Qe)},a.loginToRetro=function(e){var t=e.params.retroId;a.setPage(Ge,{retroId:t})},a.reloginToRetro=function(e){var t=e.params.retroId;a.setPage(Ge,{retroId:t,force_relogin:!0})},a.showHome=function(){a.isUserLoggedIn()?a.listRetros():a.setPage(ot)},a.showRegistration=function(e){var t=e.params,n=t.accessToken,r=t.email,o=t.fullName;a.setPage(mt,{accessToken:n,email:r,fullName:o})},a.state={Page:Ie,additionalProps:{}},a}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.router;e.get("*",this.showNotFound),e.get("/",this.showHome),e.get("/retros/:retroId",this.showRetro),e.get("/retros/:retroId/join/:joinToken",this.joinRetro),e.get("/retros/:retroId/archives",this.listRetroArchives),e.get("/retros/:retroId/archives/:archiveId",this.showRetroArchive),e.get("/retros/:retroId/login",this.loginToRetro),e.get("/retros/:retroId/relogin",this.reloginToRetro),e.get("/retros/:retroId/settings",this.showRetroSettings),e.get("/retros/:retroId/settings/password",this.showRetroPasswordSettings),e.get("/terms",this.showTerms),e.get("/registration/:accessToken/:email/:fullName",this.showRegistration)}},{key:"setPage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.setState({Page:e,additionalProps:t})}},{key:"componentWillReceiveProps",value:function(e){var t=e.not_found,n=t.api_server_not_found,r=t.retro_not_found,a=t.not_found;n&&this.setPage(Ve),r&&this.setPage(Xe),a&&this.setPage($e)}},{key:"componentDidUpdate",value:function(e,t){this.state.Page!==t.Page&&this.props.clearAlert()}},{key:"render",value:function(){var e=this.state,t=e.Page,n=e.additionalProps,r=this.props.alert;return l.a.createElement("div",null,l.a.createElement(ut,{alert:r}),l.a.createElement(t,Object.assign({config:this.props.config},n)))}},{key:"isUserLoggedIn",value:function(){return localStorage.getItem("authToken")}}]),n}(l.a.Component);ht.defaultProps={config:null,alert:null,not_found:{}};var ft=Object(u.b)((function(e){return{alert:e.messages.alert,not_found:e.messages.not_found}}),(function(e){return{clearAlert:function(){return e(Object(O.a)())},joinRetro:function(t,n){return e(Object(E.r)(t,n))}}}))(ht)},244:function(e,t,n){"use strict";var r,a=n(54),o=n(23),i={currentRetro:{name:"",video_link:"",items:[],action_items:[],is_private:!1,send_archive_email:!0,join_token:null},retroArchives:[],currentArchivedRetro:{name:"",video_link:"",items:[],action_items:[],is_private:!1,send_archive_email:!0,join_token:null},retros:[]},c=function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;if("CURRENT_RETRO_UPDATED"===t.type)return Object.assign({},e,{currentRetro:t.payload});if("CURRENT_RETRO_SEND_ARCHIVE_EMAIL_UPDATED"===t.type)return Object.assign({},e,{currentRetro:Object(o.a)(Object(o.a)({},e.currentRetro),{},{send_archive_email:t.payload})});if("CURRENT_RETRO_HIGHLIGHT_CLEARED"===t.type)return Object.assign({},e,{currentRetro:Object(o.a)(Object(o.a)({},e.currentRetro),{},{highlighted_item_id:null})});if("CURRENT_RETRO_ITEM_DELETED"===t.type){var n=t.payload,r=e.currentRetro.items.filter((function(e){return e.id!==n.id}));return Object.assign({},e,{currentRetro:Object(o.a)(Object(o.a)({},e.currentRetro),{},{items:r})})}if("CURRENT_RETRO_ITEM_UPDATED"===t.type){var a=t.payload,c=e.currentRetro.items,s=c.findIndex((function(e){return e.id===a.id})),l=[].concat(c);return-1===s?l.push(a):l[s]=a,Object.assign({},e,{currentRetro:Object(o.a)(Object(o.a)({},e.currentRetro),{},{items:l})})}if("CURRENT_RETRO_ITEM_DONE_UPDATED"===t.type){var u=t.payload,d=u.itemId,m=u.done,h=e.currentRetro.items,f=h.findIndex((function(e){return e.id===d})),p=[].concat(h),v=p[f];return v.done=m,Object.assign({},e,{currentRetro:Object(o.a)(Object(o.a)({},e.currentRetro),{},{highlighted_item_id:null,items:p})})}if("CURRENT_RETRO_ACTION_ITEM_UPDATED"===t.type){var g=t.payload,y=e.currentRetro.action_items,b=y.findIndex((function(e){return e.id===g.id})),E=[].concat(y);return-1===b?E.push(g):E[b]=g,Object.assign({},e,{currentRetro:Object(o.a)(Object(o.a)({},e.currentRetro),{},{action_items:E})})}if("CURRENT_RETRO_ACTION_ITEM_DELETED"===t.type){var R=t.payload,O=e.currentRetro.action_items.filter((function(e){return e.id!==R.id}));return Object.assign({},e,{currentRetro:Object(o.a)(Object(o.a)({},e.currentRetro),{},{action_items:O})})}if("RETROS_UPDATED"===t.type){var k=t.payload;return Object.assign({},e,{retros:k})}if("CURRENT_ARCHIVED_RETRO_UPDATED"===t.type)return Object.assign({},e,{currentArchivedRetro:t.payload});if("RETRO_ARCHIVES_UPDATED"===t.type){var I=t.payload;return Object.assign({},e,{retroArchives:I})}return e}},s={errors:{},dialog:null,alert:null,not_found:{retro_not_found:!1,not_found:!1,api_server_not_found:!1}},l=function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;return"ERRORS_UPDATED"===t.type?Object.assign({},e,{errors:t.payload}):"CLEAR_ERRORS"===t.type?Object.assign({},e,{errors:{}}):"SHOW_DIALOG"===t.type?Object.assign({},e,{dialog:t.payload}):"CLEAR_DIALOG"===t.type?Object.assign({},e,{dialog:null}):"SHOW_ALERT"===t.type?Object.assign({},e,{alert:t.payload}):"CLEAR_ALERT"===t.type?Object.assign({},e,{alert:null}):"SET_NOT_FOUND"===t.type?Object.assign({},e,{not_found:t.payload}):e}},u={websocketSession:{}},d=function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;return"WEBSOCKET_SESSION_UPDATED"===t.type?Object.assign({},e,{websocketSession:t.payload}):e}},m={featureFlags:{archiveEmails:!1},environment:{isMobile1030:!1,isMobile640:!1}},h=function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;return"FEATURE_FLAGS_UPDATED"===t.type?Object.assign({},e,{featureFlags:t.payload}):"WINDOW_SIZE_UPDATED"===t.type?Object.assign({},e,{environment:t.payload}):e}},f=n(29),p=function(){return function(e){return function(t){return function(n){if("CURRENT_RETRO_ITEM_DONE_UPDATED"===n.type){var r=n.payload,a=r.itemId,o=!1;if(r.done){var i=e.getState().retro.currentRetro;o=i.items.filter((function(e){return e.id!==a})).every((function(e){return e.done}));var c=i.items.find((function(e){return e.id===a}));e.dispatch(Object(f.b)(i.id,c.category))}o&&e.dispatch({type:"SHOW_DIALOG",payload:{title:"Archive this retro?",message:"The board will be cleared ready for your next retro and incomplete action items will be carried across.",type:"ARCHIVE_RETRO"}})}t(n)}}}},v=function(e){return function(){return function(t){return function(n){"SET_ROUTE"!==n.type?t(n):e.navigate(n.payload)}}}},g=n(17),y=function(e){return function(t){return function(n){return function(r){("SIGN_OUT"===r.type&&(e.clear(),t.dispatch(Object(g.a)())),"FORCE_RELOGIN"===r.type)&&(t.getState().user.websocketSession.request_uuid!==r.payload.originatorId&&t.dispatch(Object(g.h)(r.payload.retroId)));n(r)}}}},b=function(e){return function(){return function(t){return function(n){"TRACK_ANALYTICS"!==n.type?t(n):e.track(n.payload.type,n.payload.data)}}}},E=n(14),R=function(){return function(e){return function(t){return function(n){"SHOW_ALERT"===n.type&&(clearTimeout(r),r=setTimeout((function(){return e.dispatch(Object(E.a)())}),3500)),"CLEAR_ALERT"===n.type&&clearTimeout(r),t(n)}}}},O=n(24),k=n(20);function I(e){return localStorage.getItem("apiToken-"+e)}function w(e,t){localStorage.setItem("apiToken-"+e,t)}var j=function(e){return function(t){return function(n){return function(r){if("RETRO_CREATE"===r.type)return k.a.info("retroCreate"),void e.createRetro(r.payload).then((function(e){var n=Object(O.a)(e,2),r=n[0],a=n[1];if(r>=200&&r<400){var o=a.token;o&&w(a.retro.slug,o),t.dispatch(Object(E.c)()),t.dispatch(Object(g.j)(a.retro)),t.dispatch(Object(f.d)(a.retro.id))}else 422===r&&t.dispatch(Object(E.l)(a.errors))}));if("UPDATE_RETRO_SETTINGS"!==r.type)if("UPDATE_RETRO_PASSWORD"!==r.type)if("GET_RETROS"!==r.type)if("GET_RETRO"!==r.type)if("JOIN_RETRO"!==r.type)if("GET_RETRO_LOGIN"!==r.type)if("GET_RETRO_SETTINGS"!==r.type)if("LOGIN_TO_RETRO"!==r.type){if("DELETE_RETRO_ITEM"===r.type){k.a.info("deleteRetroItem");var a=r.payload,o=a.retroId,i=a.item;return e.deleteRetroItem(o,i.id,I(o)),void t.dispatch(Object(E.g)(i))}if("CREATE_RETRO_ITEM"!==r.type)if("UPDATE_RETRO_ITEM"!==r.type){if("VOTE_RETRO_ITEM"===r.type){var c=r.payload,s=c.retroId,l=c.item;return k.a.info("voteRetroItem"),void e.voteRetroItem(s,l.id,I(s)).then((function(e){var n=Object(O.a)(e,2)[1];t.dispatch(Object(E.i)(n.item))}))}if("NEXT_RETRO_ITEM"===r.type){k.a.info("nextRetroItem");var u=r.payload;return null!==u.highlighted_item_id&&t.dispatch(Object(E.h)(u.highlighted_item_id,!0)),void e.nextRetroItem(u.slug,I(u.slug))}if("HIGHLIGHT_RETRO_ITEM"!==r.type){if("UNHIGHLIGHT_RETRO_ITEM"===r.type){k.a.info("unhighlightRetroItem");var d=r.payload;return e.unhighlightRetroItem(d,I(d)),void t.dispatch(Object(E.f)())}if("DONE_RETRO_ITEM"===r.type){k.a.info("doneRetroItem");var m=r.payload,h=m.retroId,p=m.item;return e.doneRetroItem(h,p.id,I(h)),void t.dispatch(Object(E.h)(p.id,!0))}if("UNDONE_RETRO_ITEM"===r.type){k.a.info("undoneRetroItem");var v=r.payload,y=v.retroId,b=v.item;return e.undoneRetroItem(y,b.id,I(y)),void t.dispatch(Object(E.h)(b.id,!1))}if("EXTEND_TIMER"!==r.type)if("ARCHIVE_RETRO"!==r.type)if("CREATE_RETRO_ACTION_ITEM"!==r.type){if("DONE_RETRO_ACTION_ITEM"===r.type){var R=r.payload,j=R.retroId,_=R.actionItemId,S=R.done;return k.a.info("doneRetroActionItem"),void e.doneRetroActionItem(j,_,S,I(j)).then((function(e){var n=Object(O.a)(e,2)[1];t.dispatch(Object(E.e)(n.action_item)),n.action_item.done?t.dispatch(Object(f.f)(j)):t.dispatch(Object(f.h)(j))}))}if("DELETE_RETRO_ACTION_ITEM"===r.type){var T=r.payload,C=T.retroId,N=T.actionItem;return k.a.info("deleteRetroActionItem"),e.deleteRetroActionItem(C,N.id,I(C)),void t.dispatch(Object(E.d)(N))}if("EDIT_RETRO_ACTION_ITEM"!==r.type){if("GET_RETRO_ARCHIVES"===r.type){var A=r.payload;return k.a.info("getRetroArchives"),void e.getRetroArchives(A,I(A)).then((function(e){var n=Object(O.a)(e,2),r=n[0],a=n[1];r>=200&&r<400?t.dispatch(Object(E.v)(a.archives)):403===r?t.dispatch(Object(g.f)(A)):404===r&&t.dispatch(Object(E.p)({retro_not_found:!0}))}))}if("GET_RETRO_ARCHIVE"!==r.type)if("CREATE_USER"!==r.type)if("CREATE_SESSION"!==r.type){if("RETRIEVE_CONFIG"===r.type)return k.a.info("retrieveConfig"),void e.retrieveConfig().then((function(e){var n=Object(O.a)(e,2),r=n[0],a=n[1];r>=200&&r<400?t.dispatch(Object(E.u)({archiveEmails:a.archive_emails})):404===r&&t.dispatch(Object(E.p)({not_found:!0}))}));n(r)}else{var P=r.payload,D=P.accessToken,x=P.email,M=P.name;e.createSession(D).then((function(e){var n=Object(O.a)(e,2),r=n[0],a=n[1];200===r?(localStorage.setItem("authToken",a.auth_token),a.new_user?t.dispatch(Object(g.b)()):t.dispatch(Object(g.a)())):404===r&&t.dispatch(Object(g.c)(D,x,M))}))}else{k.a.info("createUser");var U=r.payload,L=U.accessToken,B=U.companyName,F=U.fullName;e.createUser(L,B,F).then((function(e){var n=Object(O.a)(e,2)[1];localStorage.setItem("authToken",n.auth_token),t.dispatch(Object(g.b)())}))}else{k.a.info("getRetroArchive");var H=r.payload,W=H.retroId,Y=H.archiveId;e.getRetroArchive(W,Y,I(W)).then((function(e){var n=Object(O.a)(e,2),r=n[0],a=n[1];r>=200&&r<400?t.dispatch(Object(E.t)(a.retro)):403===r?t.dispatch(Object(g.f)(W)):404===r&&t.dispatch(Object(E.p)({not_found:!0}))}))}}else{k.a.info("editRetroActionItem");var G=r.payload,z=G.retroId,J=G.actionItemId,q=G.description;e.editRetroActionItem(z,J,q,I(z)).then((function(e){var n=Object(O.a)(e,2)[1];t.dispatch(Object(E.e)(n.action_item))}))}}else{k.a.info("createRetroActionItem");var V=r.payload,K=V.retroId,X=V.description;e.createRetroActionItem(K,X,I(K))}else{k.a.info("archiveRetro");var Z=r.payload;e.archiveRetro(Z.slug,I(Z.slug),Z.send_archive_email).then((function(e){var n=Object(O.a)(e,2),r=n[0],a=n[1];r>=200&&r<400?(t.dispatch(Object(E.k)(a.retro)),t.dispatch(Object(f.a)(a.retro.id)),t.dispatch(Object(E.q)({message:"Archived!"}))):403===r&&t.dispatch(Object(g.f)(Z.slug))}))}else{k.a.info("extendTimer");var $=r.payload;e.extendTimer($,I($)).then((function(e){var n=Object(O.a)(e,2)[1];t.dispatch(Object(E.k)(n.retro))}))}}else{k.a.info("highlightRetroItem");var Q=r.payload,ee=Q.retroId,te=Q.item;e.highlightRetroItem(ee,te.id,I(ee)).then((function(e){var n=Object(O.a)(e,2)[1];t.dispatch(Object(E.k)(n.retro))}))}}else{k.a.info("updateRetroItem");var ne=r.payload,re=ne.retroId,ae=ne.item,oe=ne.description;e.updateRetroItem(re,ae.id,oe,I(re))}else{k.a.info("createRetroItem");var ie=r.payload,ce=ie.retroId,se=ie.category,le=ie.description;e.createRetroItem(ce,se,le,I(ce)).then((function(e){var n=Object(O.a)(e,2)[1];t.dispatch(Object(E.i)(n.item)),t.dispatch(Object(f.e)(ce,n.item.category))}))}}else{k.a.info("loginToRetro");var ue=r.payload,de=ue.retroId,me=ue.password;e.loginToRetro({retro_id:de,password:me}).then((function(e){var n=Object(O.a)(e,2),r=n[0],a=n[1];if(r>=200&&r<400){var o=a.token;o&&w(de,o),t.dispatch(Object(g.k)(de))}else t.dispatch(Object(E.l)({login_error_message:"Oops, wrong password!"}))}))}else{k.a.info("getRetroSettings");var he=r.payload;e.getRetroSettings(he,I(he)).then((function(e){var n=Object(O.a)(e,2),r=n[0],a=n[1];r>=200&&r<400?t.dispatch(Object(E.k)(a.retro)):403===r?t.dispatch(Object(g.f)(he)):404===r&&(k.a.warn("getRetro: Retro not found, retroId=".concat(he)),t.dispatch(Object(E.p)({retro_not_found:!0})))}))}else{k.a.info("getRetroLogin");var fe=r.payload;e.getRetroLogin(fe).then((function(e){var n=Object(O.a)(e,2),r=n[0],a=n[1];r>=200&&r<400?t.dispatch(Object(E.k)(a.retro)):404===r&&(k.a.warn("getRetro: Retro not found, retroId=".concat(fe)),t.dispatch(Object(E.p)({retro_not_found:!0})))}))}else{k.a.info("joinRetro");var pe=r.payload,ve=pe.retroId,ge=pe.joinToken;e.joinRetro({retro_id:ve,join_token:ge}).then((function(e){var n=Object(O.a)(e,2),r=n[0],a=n[1];if(r>=200&&r<400){var o=a.token;o&&(w(ve,o),t.dispatch(Object(f.k)(ve)))}else!function(e){localStorage.removeItem("apiToken-"+e)}(ve);t.dispatch(Object(g.k)(ve))}))}else{k.a.info("getRetro");var ye=r.payload;e.getRetro(ye,I(ye)).then((function(e){var n=Object(O.a)(e,2),r=n[0],a=n[1];r>=200&&r<400?(t.dispatch(Object(E.k)(a.retro)),t.dispatch(Object(f.j)(a.retro.id))):403===r?t.dispatch(Object(g.f)(ye)):404===r&&(k.a.warn("getRetro: Retro not found, retroId=".concat(ye)),t.dispatch(Object(E.p)({retro_not_found:!0})))}))}else e.getRetros().then((function(e){var n=Object(O.a)(e,2),r=n[0],a=n[1];403===r?t.dispatch(Object(E.s)()):t.dispatch(Object(E.o)(a.retros))}));else{k.a.info("updateRetroPassword");var be=r.payload,Ee=be.retroId,Re=be.currentPassword,Oe=be.newPassword,ke=be.requestUuid;e.updateRetroPassword(Ee,Re,Oe,ke,I(Ee)).then((function(e){var n=Object(O.a)(e,2),r=n[0],a=n[1];r>=200&&r<400?(t.dispatch(Object(E.c)()),window.localStorage.setItem("apiToken-".concat(Ee),a.token),t.dispatch(Object(g.i)(Ee)),t.dispatch(Object(E.q)({checkIcon:!0,message:"Password changed"}))):422===r&&t.dispatch(Object(E.l)(a.errors))}))}else{k.a.info("updateRetroSettings");var Ie=r.payload,we=Ie.retroId,je=Ie.retroName,_e=Ie.newSlug,Se=Ie.oldSlug,Te=Ie.isPrivate,Ce=Ie.requestUuid,Ne=Ie.videoLink,Ae=Ie.isMagicLinkEnabled;e.updateRetro(we,je,_e,I(we),Te,Ce,Ne,Ae).then((function(e){var n,r,a=Object(O.a)(e,2),o=a[0],i=a[1];if(o>=200&&o<400){(n=Se)!==(r=_e)&&(localStorage.setItem("apiToken-"+r,localStorage.getItem("apiToken-"+n)),localStorage.removeItem("apiToken-"+n));var c={name:je,slug:_e,is_private:i.retro.is_private,join_token:i.retro.join_token};t.dispatch(Object(E.k)(c)),t.dispatch(Object(E.c)()),t.dispatch(Object(g.j)(c)),t.dispatch(Object(E.q)({checkIcon:!0,message:"Settings saved!",className:"alert-with-back-button"}))}else 403===o?t.dispatch(Object(g.f)(we)):422===o&&t.dispatch(Object(E.l)(i.errors))}))}}}}},_=function(){return function(){return function(e){return function(t){console.info("dispatching event",t),e(t)}}}},S=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||a.d;t.a=function(e,t,n){return Object(a.e)(Object(a.c)({retro:c(),messages:l(),user:d(),config:h()}),S(Object(a.a)(_(),p(),b(n),v(e),y(window.localStorage),R(),j(t))))}},245:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(12),a=n(13),o=n(15),i=n(16),c=n(4),s=n(0),l=n.n(s),u=n(92),d=n.n(u);var m=function(e){Object(o.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(c.a)(e);if(t()){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={subscription:null},a}return Object(a.a)(n,[{key:"componentWillMount",value:function(){this.initialize(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.initialize(e)}},{key:"componentWillUnmount",value:function(){var e=this.props.cable;e.connection.close({allowReconnect:!1}),e.subscriptions.remove(this.state.subscription)}},{key:"initialize",value:function(e){var t=e.cable,n=e.websocketSessionDataReceived,r=this.state.subscription;t&&!r&&this.subscribe(t,n)}},{key:"subscribe",value:function(e,t){var n=e.subscriptions.create({channel:"SessionsChannel"},{received:function(e){return t(e.payload)}});this.setState({subscription:n})}},{key:"render",value:function(){return null}}]),n}(l.a.Component);var h=function(e){Object(o.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,r=Object(c.a)(e);if(t()){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={cable:null},a}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.url;this.initialize(e)}},{key:"componentWillReceiveProps",value:function(e){var t=e.url;this.initialize(t)}},{key:"initialize",value:function(e){this.setState((function(t){return{cable:t.cable||d.a.createConsumer(e)}}))}},{key:"render",value:function(){var e=this.state.cable;return e?l.a.createElement(m,{cable:e,websocketSessionDataReceived:this.props.websocketSessionDataReceived}):null}}]),n}(l.a.Component)},246:function(e,t,n){e.exports=n(247)},247:function(e,t,n){"use strict";n.r(t),function(e){var t=n(0),r=n.n(t),a=n(21),o=n.n(a),i=(n(252),n(226)),c=e.Retro.config;c.google_oauth_client_id||(c.mock_google_auth=!1,c.google_oauth_client_id=null),window.Retro={config:c},o.a.render(r.a.createElement(i.a,{config:c}),document.getElementById("root"))}.call(this,n(48))},252:function(e,t,n){},29:function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"j",(function(){return o})),n.d(t,"k",(function(){return i})),n.d(t,"e",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"f",(function(){return l})),n.d(t,"h",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"i",(function(){return m})),n.d(t,"c",(function(){return h})),n.d(t,"g",(function(){return f}));var r=function(e,t){return{type:"TRACK_ANALYTICS",payload:{type:e,data:t}}},a=function(e){return r("Created Retro",{retroId:e})},o=function(e){return r("Retro visited",{retroId:e})},i=function(e){return r("Retro visited - Magic Link",{retroId:e})},c=function(e,t){return r("Created Retro Item",{retroId:e,category:t})},s=function(e,t){return r("Completed Retro Item",{retroId:e,category:t})},l=function(e){return r("Done Action Item",{retroId:e})},u=function(e){return r("Undone Action Item",{retroId:e})},d=function(e){return r("Archived Retro",{retroId:e})},m=function(e){return r("Viewed Magic Link",{retroId:e})},h=function(e){return r("Copied Magic Link to Clipboard",{retroId:e})},f=function(){return r("Loaded homepage")}},47:function(e,t,n){e.exports=n.p+"static/media/icon-locked.4788264d.svg"},75:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){if(e.websocket_port){var t=document.createElement("a");return t.href=e.websocket_url,t.port=e.websocket_port,t.href}return e.websocket_url}},89:function(e,t,n){e.exports=n.p+"static/media/icon-eye.ae90c426.svg"}},[[246,1,2]]]);
//# sourceMappingURL=main.ae337d2c.chunk.js.map